<html>
<head>
<title>BWPersonality - BigWorld cell Documentation</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head>
<body>
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td align=left style="background:#0F5286"> <img src="../bwlogo_bluebkg.png"> </td></tr>
</table> <hr>
<h1>BWPersonality Module Reference</h1>
The name of this module is actually specified by the personality option in
the configuration file. This module should be implemented by the user.
It should contain callback methods that will be called by the server at
specific events.
<br><br>
It is also possible to register for these events using
<a href="BigWorld.html">BigWorld</a>.<a href=BigWorld.html#addEventListener>addEventListener</a>. For example,
<a href="BigWorld.html">BigWorld</a>.<a href=BigWorld.html#addEventListener>addEventListener</a>( "onInit", myFunc ).


<h2><a href="#" onClick="obj=document.getElementById( 'functions' );vis = (obj.style.display == 'none') ? 'block' : 'none'; obj.style.display = vis; return false;" class="h2">Member Functions</a></h2>
<table id="functions" cellpadding=0 cellspacing=3 style="margin-left: 20px;">

<tr><td>
<span class="function_list">def <a href="#onAllSpaceGeometryLoaded" class="function_list" >onAllSpaceGeometryLoaded</a>( spaceID, isBootstrap, lastpath ):</span>
</td></tr>

<tr><td>
<span class="function_list">def <a href="#onAppReady" class="function_list" >onAppReady</a>( isFromDB ):</span>
</td></tr>

<tr><td>
<span class="function_list">def <a href="#onAppShuttingDown" class="function_list" >onAppShuttingDown</a>( shutdownTime ):</span>
</td></tr>

<tr><td>
<span class="function_list">def <a href="#onCellAppData" class="function_list" >onCellAppData</a>( key, value ):</span>
</td></tr>

<tr><td>
<span class="function_list">def <a href="#onCellAppReady" class="function_list" >onCellAppReady</a>(  ):</span>
</td></tr>

<tr><td>
<span class="function_list">def <a href="#onCellAppShuttingDown" class="function_list" >onCellAppShuttingDown</a>(  ):</span>
</td></tr>

<tr><td>
<span class="function_list">def <a href="#onDelCellAppData" class="function_list" >onDelCellAppData</a>( key ):</span>
</td></tr>

<tr><td>
<span class="function_list">def <a href="#onDelGlobalData" class="function_list" >onDelGlobalData</a>( key ):</span>
</td></tr>

<tr><td>
<span class="function_list">def <a href="#onFini" class="function_list" >onFini</a>(  ):</span>
</td></tr>

<tr><td>
<span class="function_list">def <a href="#onGlobalData" class="function_list" >onGlobalData</a>( key, value ):</span>
</td></tr>

<tr><td>
<span class="function_list">def <a href="#onInit" class="function_list" >onInit</a>( isReload ):</span>
</td></tr>

<tr><td>
<span class="function_list">def <a href="#onSpaceData" class="function_list" >onSpaceData</a>( spaceID, entryID, key, value ):</span>
</td></tr>

<tr><td>
<span class="function_list">def <a href="#onSpaceGeometryLoaded" class="function_list" >onSpaceGeometryLoaded</a>( spaceID, mappingName ):</span>
</td></tr>

</table>


<hr>
<h2>Member Function Documentation</h2>

<a name="onAllSpaceGeometryLoaded"></a><p class="function_definition">
<span class="function_definition">def onAllSpaceGeometryLoaded( <i>spaceID, isBootstrap, lastpath</i> ):</span>
</p>

<div class="function_description">If present, this method is called when <a href="BigWorld.html">BigWorld</a> has finished loading the
geometry mapping of a new space. If the space is made up of multiple cells,
this callback is called when all of the cells have loaded the geometry
mapping	(see <a href="BigWorld.html">BigWorld</a>.<a href=BigWorld.html#addSpaceGeometryMapping>addSpaceGeometryMapping</a>) for the area covered by each
cell. This method is called on simultaneously on each CellApp that contains
a cell in the new space.
<br><br>
This callback is never called for spaces with no geometry mappings.
<br><br>
For spaces with a multiple geometry mappings, this callback is called when
all the geometry mappings have been loaded. If additional geometry mappings
are added to the space after this callback has been called, then this
callback will be called again when the new geometry mappings are loaded.
However, there is a race condition when multiple geometry mappings are
being added to the space: <a href="BigWorld.html">BigWorld</a> may mistakenly call this callback
while geometry mappings are still being added to the space. In this case,
the lastPath parameter becomes useful. It is set to the path of geometry
mapping <a href="BigWorld.html">BigWorld</a> considers to be the last geometry mapping added to the
space.
<br><br>
This callback is not called if the game is restored from database - even
if the space was loading geometry when it was shutdown.
</div>

<p>
<span class="function_parameter">Parameters:</span>
<table border=0 cellpadding=0 cellspacing=3 style="margin-left: 20px;">

<tr valign=top><td><span class="function_parameter_name"><i>spaceID</i></span></td><td><span class="function_parameter_description">&nbsp;spaceID is the id of the recently created space whose chunks
have just finished loading.
</span></td></tr>

<tr valign=top><td><span class="function_parameter_name"><i>isBootstrap</i></span></td><td><span class="function_parameter_description">&nbsp;isBootstrap is a boolean value. If the space is
comprised of multiple cells, isBootstrap is set to true only for one of the
callbacks. This is usually the callback on the CellApp that contains the
first cell created for the space but this is not guaranteed.
</span></td></tr>

<tr valign=top><td><span class="function_parameter_name"><i>lastpath</i></span></td><td><span class="function_parameter_description">&nbsp;lastpath is the path of the last geometry mapping added to
the space.
</span></td></tr>

</table>
</p>

<a name="onAppReady"></a><p class="function_definition">
<span class="function_definition">def onAppReady( <i>isFromDB</i> ):</span>
</p>

<div class="function_description">If present, this method is called on the first CellApp when the default
space is ready. If a default space is not used, this callback is never
called.
<br><br>
It is often preferable to use <a href="BWPersonality.html">BWPersonality</a>.<a href=BWPersonality.html#onBaseAppReady>onBaseAppReady</a> instead of this
callback.
</div>

<p>
<span class="function_parameter">Parameters:</span>
<table border=0 cellpadding=0 cellspacing=3 style="margin-left: 20px;">

<tr valign=top><td><span class="function_parameter_name"><i>isFromDB</i></span></td><td><span class="function_parameter_description">&nbsp;isFromDB is a boolean set to True if the space was created
	from the database and False if the CellAppMgr created the default space.
</span></td></tr>

</table>
</p>

<a name="onAppShuttingDown"></a><p class="function_definition">
<span class="function_definition">def onAppShuttingDown( <i>shutdownTime</i> ):</span>
</p>

<div class="function_description">If present, this method is called when a controlled shutdown has been
scheduled.
</div>

<p>
<span class="function_parameter">Parameters:</span>
<table border=0 cellpadding=0 cellspacing=3 style="margin-left: 20px;">

<tr valign=top><td><span class="function_parameter_name"><i>shutdownTime</i></span></td><td><span class="function_parameter_description">&nbsp;shutdownTime is the game time that the server is
scheduled to shut down at.
</span></td></tr>

</table>
</p>

<a name="onCellAppData"></a><p class="function_definition">
<span class="function_definition">def onCellAppData( <i>key, value</i> ):</span>
</p>

<div class="function_description">If present, this method is called whenever a shared CellApp data value is
set. This may be when a value is initially set or when it is modified.
</div>

<p>
<span class="function_parameter">Parameters:</span>
<table border=0 cellpadding=0 cellspacing=3 style="margin-left: 20px;">

<tr valign=top><td><span class="function_parameter_name"><i>key</i></span></td><td><span class="function_parameter_description">&nbsp;The key associated with the value.
</span></td></tr>

<tr valign=top><td><span class="function_parameter_name"><i>value</i></span></td><td><span class="function_parameter_description">&nbsp;The new value.
</span></td></tr>

</table>
</p>

<a name="onCellAppReady"></a><p class="function_definition">
<span class="function_definition">def onCellAppReady( <i></i> ):</span>
</p>

<div class="function_description"></div>

<a name="onCellAppShuttingDown"></a><p class="function_definition">
<span class="function_definition">def onCellAppShuttingDown( <i></i> ):</span>
</p>

<div class="function_description"></div>

<a name="onDelCellAppData"></a><p class="function_definition">
<span class="function_definition">def onDelCellAppData( <i>key</i> ):</span>
</p>

<div class="function_description">If present, this method is called whenever a shared CellApp data value is
deleted.
</div>

<p>
<span class="function_parameter">Parameters:</span>
<table border=0 cellpadding=0 cellspacing=3 style="margin-left: 20px;">

<tr valign=top><td><span class="function_parameter_name"><i>key</i></span></td><td><span class="function_parameter_description">&nbsp;The key of the value deleted.
</span></td></tr>

</table>
</p>

<a name="onDelGlobalData"></a><p class="function_definition">
<span class="function_definition">def onDelGlobalData( <i>key</i> ):</span>
</p>

<div class="function_description">If present, this method is called whenever a shared Global data value is
deleted.
</div>

<p>
<span class="function_parameter">Parameters:</span>
<table border=0 cellpadding=0 cellspacing=3 style="margin-left: 20px;">

<tr valign=top><td><span class="function_parameter_name"><i>key</i></span></td><td><span class="function_parameter_description">&nbsp;The key of the value deleted.
</span></td></tr>

</table>
</p>

<a name="onFini"></a><p class="function_definition">
<span class="function_definition">def onFini( <i></i> ):</span>
</p>

<div class="function_description">If present, this method is called whenever the Python script system is
about to be completely shut down. This function is called after all stages
of onBaseAppShutDown have executed.
</div>

<a name="onGlobalData"></a><p class="function_definition">
<span class="function_definition">def onGlobalData( <i>key, value</i> ):</span>
</p>

<div class="function_description">If present, this method is called whenever a shared Global data value is
set. This may be when a value is initially set or when it is modified.
</div>

<p>
<span class="function_parameter">Parameters:</span>
<table border=0 cellpadding=0 cellspacing=3 style="margin-left: 20px;">

<tr valign=top><td><span class="function_parameter_name"><i>key</i></span></td><td><span class="function_parameter_description">&nbsp;The key associated with the value.
</span></td></tr>

<tr valign=top><td><span class="function_parameter_name"><i>value</i></span></td><td><span class="function_parameter_description">&nbsp;The new value.
</span></td></tr>

</table>
</p>

<a name="onInit"></a><p class="function_definition">
<span class="function_definition">def onInit( <i>isReload</i> ):</span>
</p>

<div class="function_description">If present, this method is called whenever the Python scripts have completed
loading.
</div>

<p>
<span class="function_parameter">Parameters:</span>
<table border=0 cellpadding=0 cellspacing=3 style="margin-left: 20px;">

<tr valign=top><td><span class="function_parameter_name"><i>isReload</i></span></td><td><span class="function_parameter_description">&nbsp;True if the loading was caused by a call to
<a href="BigWorld.html">BigWorld</a>.<a href=BigWorld.html#reloadScript>reloadScript</a>, otherwise, False
</span></td></tr>

</table>
</p>

<a name="onSpaceData"></a><p class="function_definition">
<span class="function_definition">def onSpaceData( <i>spaceID, entryID, key, value</i> ):</span>
</p>

<div class="function_description">If present, this method is called whenever a new space data entry is added.
<br><br>
Callbacks may be made for internal <a href="BigWorld.html">BigWorld</a> space data, where the key is in
the reserved range between 0 and 255. These calls should be ignored.
</div>

<p>
<span class="function_parameter">Parameters:</span>
<table border=0 cellpadding=0 cellspacing=3 style="margin-left: 20px;">

<tr valign=top><td><span class="function_parameter_name"><i>spaceID</i></span></td><td><span class="function_parameter_description">&nbsp;spaceID is the id of the space the data is being added to.
</span></td></tr>

<tr valign=top><td><span class="function_parameter_name"><i>entryID</i></span></td><td><span class="function_parameter_description">&nbsp;entryID is the entry id for the newly added data.
</span></td></tr>

<tr valign=top><td><span class="function_parameter_name"><i>key</i></span></td><td><span class="function_parameter_description">&nbsp;key is the key of the newly added data.
</span></td></tr>

<tr valign=top><td><span class="function_parameter_name"><i>value</i></span></td><td><span class="function_parameter_description">&nbsp;is the actual data that has been added.
</span></td></tr>

</table>
</p>

<a name="onSpaceGeometryLoaded"></a><p class="function_definition">
<span class="function_definition">def onSpaceGeometryLoaded( <i>spaceID, mappingName</i> ):</span>
</p>

<div class="function_description">This is a callback function that can be implemented by the user.
<br><br>
If present, this method is called whenever a space geometry is fully
loaded on a cell.
</div>

<p>
<span class="function_parameter">Parameters:</span>
<table border=0 cellpadding=0 cellspacing=3 style="margin-left: 20px;">

<tr valign=top><td><span class="function_parameter_name"><i>spaceID</i></span></td><td><span class="function_parameter_description">&nbsp;spaceID is the id of the space where the geometry is loaded.
</span></td></tr>

<tr valign=top><td><span class="function_parameter_name"><i>mappingName</i></span></td><td><span class="function_parameter_description">&nbsp;mappingName is the name of the geometry that has been
fully loaded. The mappingName is name of the immediate directory name that
contains chunk files.
</span></td></tr>

</table>
</p>


<hr>
<p class="copyrightFooter">Copyright 1999-2012 BigWorld Pty. Ltd. All rights reserved. Proprietary commercial in confidence.</p>
</body>
</html>
