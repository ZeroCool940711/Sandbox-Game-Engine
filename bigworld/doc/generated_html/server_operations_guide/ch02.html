<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>Chapter&nbsp;2.&nbsp;Server Configuration with bw.xml</title>
      <link rel="stylesheet" href="../css/bigworld.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="index.html" title="Server Operations Guide">
      <link rel="up" href="index.html" title="Server Operations Guide">
      <link rel="prev" href="ch01.html" title="Chapter&nbsp;1.&nbsp;Introduction">
      <link rel="next" href="ch03.html" title="Chapter&nbsp;3.&nbsp;Admin Tools"><script type="text/javascript" src="../css/bigworld.js"></script></head>
   <body onLoad="loader();">
      <div id="bigworld-header"><img src="bigworld_logo.gif" id="bwLogo" alt="bw logo"></div>
      <div id="content">
         <div class="navheader">
            <table width="95%" align="center" summary="Navigation header">
               <tr>
                  <th colspan="3" align="center">Chapter&nbsp;2.&nbsp;Server Configuration with <span class="literal">bw.xml</span></th>
               </tr>
               <tr>
                  <td width="20%" align="left"><a accesskey="p" href="ch01.html">Prev</a>&nbsp;
                  </td>
                  <th width="55%" align="center">&nbsp;</th>
                  <td width="20%" align="right">&nbsp;<a accesskey="n" href="ch03.html">Next</a></td>
               </tr>
            </table>
            <hr class="navheaderline">
         </div>
         <div class="chapter" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title"><a name="xref_Server_Configuration_With_bw_xml"></a>Chapter&nbsp;2.&nbsp;Server Configuration with <span class="literal">bw.xml</span></h2>
                  </div>
               </div>
            </div>
            <div class="toc">
               <p><b>Table of Contents</b></p>
               <dl>
                  <dt><span class="sect1"><a href="ch02.html#xref_The_Entry_parentFile">2.1. The entry <span class="literal">parentFile</span></a></span></dt>
                  <dt><span class="sect1"><a href="ch02.html#xref_User_Dependent_Configuration">2.2. User dependent configuration</a></span></dt>
                  <dt><span class="sect1"><a href="ch02.html#xref_Command_Line_Options_Override_XML">2.3. Command-Line Options</a></span></dt>
                  <dt><span class="sect1"><a href="ch02.html#xref_General_Configuration_Options">2.4. General Configuration Options</a></span></dt>
                  <dt><span class="sect1"><a href="ch02.html#xref_Network_Configuration_Options">2.5. Network Configuration Options</a></span></dt>
                  <dt><span class="sect1"><a href="ch02.html#xref_Load_Balancing_Configuration_Options">2.6. Load Balancing Configuration Options</a></span></dt>
                  <dd>
                     <dl>
                        <dt><span class="sect2"><a href="ch02.html#d0e1275">2.6.1. Entities Cardinality Configuration Options</a></span></dt>
                     </dl>
                  </dd>
                  <dt><span class="sect1"><a href="ch02.html#xref_BaseApp_Configuration_Options">2.7. BaseApp Configuration Options</a></span></dt>
                  <dd>
                     <dl>
                        <dt><span class="sect2"><a href="ch02.html#xref_BaseApp_Secondary_Database_Configuration_Options">2.7.1. Secondary Database Configuration Options</a></span></dt>
                        <dt><span class="sect2"><a href="ch02.html#d0e1860">2.7.2. Packet Log Configuration Options</a></span></dt>
                        <dt><span class="sect2"><a href="ch02.html#d0e1917">2.7.3. ID Configuration Options</a></span></dt>
                        <dt><span class="sect2"><a href="ch02.html#d0e1982">2.7.4. Client Upstream Limits</a></span></dt>
                     </dl>
                  </dd>
                  <dt><span class="sect1"><a href="ch02.html#xref_BaseAppMgr_Configuration_Options">2.8. BaseAppMgr Configuration Options</a></span></dt>
                  <dt><span class="sect1"><a href="ch02.html#xref_Bots_Configuration_Options">2.9. Bots Configuration Options</a></span></dt>
                  <dt><span class="sect1"><a href="ch02.html#xref_CellApp_Configuration_Options">2.10. CellApp Configuration Options</a></span></dt>
                  <dd>
                     <dl>
                        <dt><span class="sect2"><a href="ch02.html#d0e2921">2.10.1. Noise Configuration Options</a></span></dt>
                        <dt><span class="sect2"><a href="ch02.html#d0e3020">2.10.2. ID Configuration Options</a></span></dt>
                        <dt><span class="sect2"><a href="ch02.html#d0e3085">2.10.3. CellApp Profiles Configuration Options</a></span></dt>
                     </dl>
                  </dd>
                  <dt><span class="sect1"><a href="ch02.html#xref_CellAppMgr_Configuration_Options">2.11. CellAppMgr Configuration Options</a></span></dt>
                  <dt><span class="sect1"><a href="ch02.html#xref_DBMgr_Configuration_Options">2.12. DBMgr Configuration Options</a></span></dt>
                  <dd>
                     <dl>
                        <dt><span class="sect2"><a href="ch02.html#d0e4096">2.12.1. Data Consolidation Options</a></span></dt>
                     </dl>
                  </dd>
                  <dt><span class="sect1"><a href="ch02.html#xref_LoginApp_Configuration_Options">2.13. LoginApp Configuration Options</a></span></dt>
                  <dt><span class="sect1"><a href="ch02.html#xref_Reviver_Configuration_Options">2.14. Reviver Configuration Options</a></span></dt>
                  <dd>
                     <dl>
                        <dt><span class="sect2"><a href="ch02.html#d0e4605">2.14.1. Reviver's BaseAppMgr Configuration Options</a></span></dt>
                        <dt><span class="sect2"><a href="ch02.html#d0e4641">2.14.2. Reviver's CellAppMgr Configuration Options</a></span></dt>
                        <dt><span class="sect2"><a href="ch02.html#d0e4677">2.14.3. Reviver's DBMgr Configuration Options</a></span></dt>
                        <dt><span class="sect2"><a href="ch02.html#d0e4713">2.14.4. Reviver's LoginApp Configuration Options</a></span></dt>
                     </dl>
                  </dd>
               </dl>
            </div>
            <p>The single most important configuration file on the server is
                 <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>,
                 where <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em></span> is the
                 resource tree used by the server (usually specified in
                 <span class="literal">~/.bwmachined.conf</span>).
            </p>
            <p>All sever processes read this file. It contains many parameters, all
                 of which are described in this chapter. The default values are appropriate
                 for many different games, and care should be taken when changing them, since
                 it might affect performance.
            </p>
            <p>On the description of the parameters, please note the
                 following:
            </p>
            <div class="itemizedlist">
               <ul type="disc">
                  <li>
                     <p>Boolean parameters should be specified as true or false.</p>
                  </li>
                  <li>
                     <p>Where a tag is specified as
                              <span class="literal"><em class="replaceable"><code>tag1</code></em>/<em class="replaceable"><code>tag2</code></em></span>,
                              the second tag is specified inside the scope of the first one. For
                              example, the tag <span class="literal">dbMgr/allowEmptyDigest</span> is specified
                              as:
                     </p>
                  </li>
               </ul>
            </div><pre class="programlisting">&lt;dbMgr&gt;
  &lt;allowEmptyDigest&gt; true &lt;/allowEmptyDigest&gt;
&lt;/dbMgr&gt;</pre><div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_The_Entry_parentFile"></a>2.1.&nbsp;The entry <span class="literal">parentFile</span></h2>
                     </div>
                  </div>
               </div>
               <p>The entry <span class="literal">parentFile</span> in the configuration file
                      specifies the next file in the chain of files where BigWorld should look
                      for an entry for a configuration option.
               </p>
               <p>To assign a default value to a configuration option, BigWorld
                      follows the steps below:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p>Searches for an entry for the configuration option in file
                                   <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>.
                        </p>
                     </li>
                     <li>
                        <p>If the file does not contain an entry for the configuration
                                   option, then the chain of configuration files is inspected, until the
                                   entry is found.
                        </p>
                     </li>
                     <li>
                        <p>If the entry is not specified in any of these files, a
                                   hard-coded default is used.
                        </p>
                     </li>
                  </ul>
               </div>
               <p>All default values are stored in file
                      <code class="filename">bigworld/res/server/defaults.xml</code>. Typically, the
                      entry <span class="literal">parentFile</span> in file
                      <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span> is
                      set to <span class="literal">server/defaults.xml</span>, and only non-default
                      options are stored in your <span class="literal">server/bw.xml</span>.
               </p>
               <p>The example below shows the configuration option
                      <span class="literal">maxCPUOffload</span> in section <span class="literal">balance</span>
                      having its default value overridden:
               </p>
               <div class="informalfigure">
                  <div class="mediaobject"><img src="images/overriding_default_values_for_configuration_options.png"><span class="caption">
                        <p>Overriding default values for configuration
                                   options
                        </p></span></div>
               </div>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_User_Dependent_Configuration"></a>2.2.&nbsp;User dependent configuration
                        </h2>
                     </div>
                  </div>
               </div>
               <p>A file that is user dependent can be used instead of
                      <code class="code">bw.xml</code>. This is useful to allow multiple users to run from
                      the same resource tree. In a production environment, for example, you may
                      run the resources using a test user before using the production
                      user.
               </p>
               <p>If a file with the name <code class="code">server/bw_&lt;username&gt;.xml</code>
                      exists, this is used as the start of the server configuration chain
                      instead of <code class="code">server/bw.xml</code>.
               </p>
               <p>Typically, the <code class="code">parentFile</code> section in this file would
                      refer to <code class="code">server/bw.xml</code> and only options specific to the user,
                      such as <code class="code">dbMgr/databaseName</code> would be in this file.
               </p>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_Command_Line_Options_Override_XML"></a>2.3.&nbsp;Command-Line Options
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The configuration options specified in file
                      <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                      can also be overridden via command-line arguments.
               </p>
               <p>To override a default value, add arguments in the format
                      <span class="literal">+optionName</span> value.
               </p>
               <p>The example shows the <span class="literal">baseApp</span> section's
                      configuration option <span class="literal">pythonPort</span> having its default
                      value changed to <span class="literal">40001</span>, and the option
                      <span class="literal">archivePeriod</span> changed to <span class="literal">0</span>:
               </p><pre class="programlisting">baseapp +baseApp/pythonPort 40001 +baseApp/archivePeriod 0</pre><p>Values changed via the command line are not sent to components
                      started via BWMachined. This includes using WebConsole,
                      <span class="literal">control_cluster.py</span>, and components started by a Reviver
                      process.
               </p>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_General_Configuration_Options"></a>2.4.&nbsp;General Configuration Options
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The list below describes the general configuration options:</p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p><em class="emphasis"><span class="literal">bitsPerSecondToClient</span>
                                      (Integer)</em></p>
                        <p>Desired default bandwidth from server to the client. To
                                   calculate the number of bytes to be sent in each packet, the formula
                                   below is used (where <span class="literal">UDP_OVERHEAD</span> is 28
                                   bytes):
                        </p>
                        <p><span class="literal">packetSize = (bitsPerSecondToClient / 8 /
                                      gameUpdateHertz) - UDP_OVERHEAD</span></p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">debugConfigOptions</span>
                                      (Integer)</em></p>
                        <p>Level of logging information generated when processing
                                   configuration parameters in file
                                   <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/
                                      bw.xml</span>.
                        </p>
                        <p>The possible values are described in the list below:</p>
                        <div class="itemizedlist">
                           <ul type="circle">
                              <li>
                                 <p><em class="emphasis">0 </em></p>
                                 <p>No log is generated.</p>
                              </li>
                              <li>
                                 <p><em class="emphasis">1</em></p>
                                 <p>A log message is generated for each configuration option
                                                read.
                                 </p>
                              </li>
                              <li>
                                 <p><em class="emphasis">2</em></p>
                                 <p>A verbose message is generated for each configuration option
                                                read.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">desiredBaseApps</span>
                                      (Integer)</em></p>
                        <p>Number of BaseApps that need to be running for the server to
                                   start.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">desiredCellApps</span>
                                      (Integer)</em></p>
                        <p>Number of CellApps that need to be running for the server to
                                   start.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">externalInterface</span>
                                      (String)</em></p>
                        <p>Network adapter interface to use for external communication, if
                                   not explicitly set by the server component.
                        </p>
                        <p>In a production environment, BaseApps are recommended to have
                                   two Ethernet adapters: one adapter connected to the Internet, and a
                                   separate one connected to the internal LAN.
                        </p>
                        <p>During development, there is no problem with using the same
                                   interface.
                        </p>
                        <p>Accepted formats are:</p>
                        <div class="itemizedlist">
                           <ul type="circle">
                              <li>
                                 <p><em class="emphasis">Adapter name</em> <span class="symbol">&#8208;</span> Examples: <span class="literal">eth0</span>,
                                                <span class="literal">eth1</span></p>
                              </li>
                              <li>
                                 <p><em class="emphasis">IP<span class="literal">[/netmask</span>]</em> <span class="symbol">&#8208;</span> Examples: <span class="literal">10.5.2.1,
                                                   10.0.0.0/8</span>, <span class="literal">192.168.5.0/24</span></p>
                              </li>
                              <li>
                                 <p><em class="emphasis">Domain name</em> <span class="symbol">&#8208;</span> Examples:
                                                <span class="literal">intern0.cluster/24</span>,
                                                <span class="literal">extern5.cluster/24</span></p>
                              </li>
                           </ul>
                        </div>
                        <p>This value can be overridden by a tag with same name in the
                                   following sections:
                        </p>
                        <div class="itemizedlist">
                           <ul type="circle">
                              <li>
                                 <p><span class="literal">baseApp</span> <span class="symbol">&#8208;</span>
                                                For more details, see <a href="ch02.html#xref_BaseApp_Configuration_Options" title="2.7.&nbsp;BaseApp Configuration Options">BaseApp Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">loginApp</span> <span class="symbol">&#8208;</span>
                                                For more details, see <a href="ch02.html#xref_LoginApp_Configuration_Options" title="2.13.&nbsp;LoginApp Configuration Options">LoginApp Configuration Options</a>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p><a name="xref_externalLatencyMax"></a><em class="emphasis"><span class="literal">externalLatencyMax</span>
                                      (Float)</em></p>
                        <p>Maximum number of seconds by which packets sent from the server
                                   process will be artificially delayed. Each packet will be randomly
                                   delayed between this value and externalLatencyMin.
                        </p>
                        <p>This value can be overridden by a tag with the same name in the
                                   following sections:
                        </p>
                        <div class="itemizedlist">
                           <ul type="circle">
                              <li>
                                 <p><span class="literal">baseApp</span> <span class="symbol">&#8208;</span>
                                                For more details, see <a href="ch02.html#xref_BaseApp_Configuration_Options" title="2.7.&nbsp;BaseApp Configuration Options">BaseApp Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">loginApp</span> <span class="symbol">&#8208;</span>
                                                For more details, see <a href="ch02.html#xref_LoginApp_Configuration_Options" title="2.13.&nbsp;LoginApp Configuration Options">LoginApp Configuration Options</a>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p><em class="emphasis">This feature is useful for testing during
                                      development.</em></p>
                        <p>See also <a href="ch02.html#xref_externalLossRatio">???</a>, <a href="ch02.html#xref_externalLatencyMin">???</a></p>
                     </li>
                     <li>
                        <p><a name="xref_externalLatencyMin"></a><em class="emphasis"><span class="literal">externalLatencyMin</span>
                                      (Float)</em></p>
                        <p>Minimum number of seconds by which packets sent from the server
                                   process will be artificially delayed. Each packet will be randomly
                                   delayed between this value and externalLatencyMax.
                        </p>
                        <p>This value can be overridden by a tag with the same name in the
                                   following sections:
                        </p>
                        <div class="itemizedlist">
                           <ul type="circle">
                              <li>
                                 <p><span class="literal">baseApp</span> <span class="symbol">&#8208;</span>
                                                For more details, see <a href="ch02.html#xref_BaseApp_Configuration_Options" title="2.7.&nbsp;BaseApp Configuration Options">BaseApp Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">loginApp</span> <span class="symbol">&#8208;</span>
                                                For more details, see <a href="ch02.html#xref_LoginApp_Configuration_Options" title="2.13.&nbsp;LoginApp Configuration Options">LoginApp Configuration Options</a>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p><em class="emphasis">This feature is useful for testing during
                                      development.</em></p>
                        <p>See also <a href="ch02.html#xref_externalLossRatio">???</a>, <a href="ch02.html#xref_externalLatencyMax">???</a></p>
                     </li>
                     <li>
                        <p><a name="xref_externalLossRatio"></a><em class="emphasis"><span class="literal">externalLossRatio</span>
                                      (Float)</em></p>
                        <p>Proportion of outgoing packets that will be dropped by this
                                   processes external nub to simulate loss on the external network. This
                                   is a value between 0.0 and 1.0 indicating what proportion of packets
                                   will be dropped.
                        </p>
                        <p>This value can be overridden by a tag with the same name in the
                                   following sections:
                        </p>
                        <div class="itemizedlist">
                           <ul type="circle">
                              <li>
                                 <p><span class="literal">baseApp</span> <span class="symbol">&#8208;</span>
                                                For more details, see <a href="ch02.html#xref_BaseApp_Configuration_Options" title="2.7.&nbsp;BaseApp Configuration Options">BaseApp Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">loginApp</span> <span class="symbol">&#8208;</span>
                                                For more details, see <a href="ch02.html#xref_LoginApp_Configuration_Options" title="2.13.&nbsp;LoginApp Configuration Options">LoginApp Configuration Options</a>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p><em class="emphasis">This feature is useful for testing during
                                      development.</em></p>
                        <p>See also <a href="ch02.html#xref_externalLatencyMin">???</a>, <a href="ch02.html#xref_externalLatencyMax">???</a></p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">gameUpdateHertz</span>
                                      (Integer)</em></p>
                        <p>Number of times per second that the server should send an update
                                   to the clients. This corresponds to the game tick frequency.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">hasDevelopmentAssertions</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether server should be aggressive in its use
                                   of assertions.
                        </p>
                        <p>This option should be set to true during development, and to
                                   false when running a production server.
                        </p>
                        <p>For example, if this option is set to true, then a corrupted
                                   packet sent from a client can cause an assertion on the server, while
                                   if this is set to false, then only an error message is generated and
                                   the server component continues to run.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalInterface</span></em><em class="emphasis"> (String)</em></p>
                        <p><em class="emphasis">This tag is deprecated, and its use is not
                                      recommended. For details, see the document <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server Overview</span>'s section <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server
                                         Components</span> <span class="symbol">&#8594;</span> <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">BWMachined</span> <span class="symbol">&#8594;</span> <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">BWMachined interface
                                         discovery</span>.</em></p>
                        <p>Network adapter interface to use for internal communication, if
                                   not explicitly set by the server component.
                        </p>
                        <p>Accepted formats are:</p>
                        <div class="itemizedlist">
                           <ul type="circle">
                              <li>
                                 <p><em class="emphasis">Adapter name</em> <span class="symbol">&#8208;</span> Examples: <span class="literal">eth0</span>,
                                                <span class="literal">eth1</span></p>
                              </li>
                              <li>
                                 <p><em class="emphasis">IP<span class="literal">[/netmask]</span></em> <span class="symbol">&#8208;</span> Examples: <span class="literal">10.5.2.1,
                                                   10.0.0.0/8</span>, <span class="literal">192.168.5.0/24</span></p>
                              </li>
                              <li>
                                 <p><em class="emphasis">Domain name</em> <span class="symbol">&#8208;</span> Examples:
                                                <span class="literal">intern0.clust/24</span>,
                                                <span class="literal">extern5.clust/24</span></p>
                              </li>
                           </ul>
                        </div>
                        <p>This value can be overridden by a tag with the same name in the
                                   following sections:
                        </p>
                        <div class="itemizedlist">
                           <ul type="circle">
                              <li>
                                 <p><span class="literal">baseApp</span> <span class="symbol">&#8208;</span>
                                                For details, see <a href="ch02.html#xref_BaseApp_Configuration_Options" title="2.7.&nbsp;BaseApp Configuration Options">BaseApp Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">baseAppMgr</span> <span class="symbol">&#8208;</span> For details, see <a href="ch02.html#xref_BaseAppMgr_Configuration_Options" title="2.8.&nbsp;BaseAppMgr Configuration Options">BaseAppMgr Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">cellApp</span> <span class="symbol">&#8208;</span>
                                                For details, see <a href="ch02.html#xref_CellApp_Configuration_Options" title="2.10.&nbsp;CellApp Configuration Options">CellApp Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">cellAppMgr</span> <span class="symbol">&#8208;</span> For details, see <a href="ch02.html#xref_CellApp_Configuration_Options" title="2.10.&nbsp;CellApp Configuration Options">CellApp Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">dbMgr</span> <span class="symbol">&#8208;</span>
                                                For details, see <a href="ch02.html#xref_DBMgr_Configuration_Options" title="2.12.&nbsp;DBMgr Configuration Options">DBMgr Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">loginApp</span> <span class="symbol">&#8208;</span>
                                                For details, see <a href="ch02.html#xref_LoginApp_Configuration_Options" title="2.13.&nbsp;LoginApp Configuration Options">LoginApp Configuration Options</a>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLatencyMax</span>
                                      (Float)</em></p>
                        <p>Maximum number of seconds by which packets sent from the
                                   application's internal nub will be delayed.
                        </p>
                        <p>For more details, see
                                   <span class="literal">internalLatencyMin</span>.
                        </p>
                        <p>See also <span class="literal">internalLossRatio</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLatencyMin</span>
                                      (Float)</em></p>
                        <p>Minimum number of seconds by which packets sent from the
                                   application's internal nub will be delayed.
                        </p>
                        <p>Each packet will be randomly delayed between this value and
                                   <span class="literal">internalLatencyMax</span>.
                        </p>
                        <p><em class="emphasis">This feature is useful for testing during
                                      development.</em></p>
                        <p>This value can be overridden by a tag with the same name in the
                                   following sections:
                        </p>
                        <div class="itemizedlist">
                           <ul type="circle">
                              <li>
                                 <p><span class="literal">baseApp</span> <span class="symbol">&#8208;</span>
                                                For details, see <a href="ch02.html#xref_BaseApp_Configuration_Options" title="2.7.&nbsp;BaseApp Configuration Options">BaseApp Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">baseAppMgr</span> <span class="symbol">&#8208;</span> For details, see <a href="ch02.html#xref_BaseAppMgr_Configuration_Options" title="2.8.&nbsp;BaseAppMgr Configuration Options">BaseAppMgr Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">cellApp</span> <span class="symbol">&#8208;</span>
                                                For details, see <a href="ch02.html#xref_CellApp_Configuration_Options" title="2.10.&nbsp;CellApp Configuration Options">CellApp Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">cellAppMgr</span> <span class="symbol">&#8208;</span> For details, see <a href="ch02.html#xref_CellApp_Configuration_Options" title="2.10.&nbsp;CellApp Configuration Options">CellApp Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">dbMgr</span> <span class="symbol">&#8208;</span>
                                                For details, see <a href="ch02.html#xref_DBMgr_Configuration_Options" title="2.12.&nbsp;DBMgr Configuration Options">DBMgr Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">loginApp</span> <span class="symbol">&#8208;</span>
                                                For details, see <a href="ch02.html#xref_LoginApp_Configuration_Options" title="2.13.&nbsp;LoginApp Configuration Options">LoginApp Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">reviver</span> <span class="symbol">&#8208;</span>
                                                For details, see <a href="ch02.html#xref_Reviver_Configuration_Options" title="2.14.&nbsp;Reviver Configuration Options">Reviver Configuration Options</a>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p>See also options <span class="literal">internalLatencyMax</span> and
                                   <span class="literal">internalLossRatio</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLossRatio</span>
                                      (Float)</em></p>
                        <p>Proportion of packets on this application's internal nub that
                                   will be dropped to simulate loss on the internal network. This is a
                                   ratio between 0.0 and 1.0.
                        </p>
                        <p><em class="emphasis">This feature is useful for testing during
                                      development.</em></p>
                        <p>This value can be overridden by a tag with the same name in the
                                   following sections:
                        </p>
                        <div class="itemizedlist">
                           <ul type="circle">
                              <li>
                                 <p><span class="literal">baseApp</span> <span class="symbol">&#8208;</span>
                                                For details, see <a href="ch02.html#xref_BaseApp_Configuration_Options" title="2.7.&nbsp;BaseApp Configuration Options">BaseApp Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">baseAppMgr</span> <span class="symbol">&#8208;</span> For details, see <a href="ch02.html#xref_BaseAppMgr_Configuration_Options" title="2.8.&nbsp;BaseAppMgr Configuration Options">BaseAppMgr Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">cellApp</span> <span class="symbol">&#8208;</span>
                                                For details, see <a href="ch02.html#xref_CellApp_Configuration_Options" title="2.10.&nbsp;CellApp Configuration Options">CellApp Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">cellAppMgr</span> <span class="symbol">&#8208;</span> For details, see <a href="ch02.html#xref_CellApp_Configuration_Options" title="2.10.&nbsp;CellApp Configuration Options">CellApp Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">dbMgr</span> <span class="symbol">&#8208;</span>
                                                For details, see <a href="ch02.html#xref_DBMgr_Configuration_Options" title="2.12.&nbsp;DBMgr Configuration Options">DBMgr Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">loginApp</span> <span class="symbol">&#8208;</span>
                                                For details, see <a href="ch02.html#xref_LoginApp_Configuration_Options" title="2.13.&nbsp;LoginApp Configuration Options">LoginApp Configuration Options</a>.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="literal">reviver</span> <span class="symbol">&#8208;</span>
                                                For details, see <a href="ch02.html#xref_Reviver_Configuration_Options" title="2.14.&nbsp;Reviver Configuration Options">Reviver Configuration Options</a>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p>See also options <span class="literal">internalLatencyMax</span> and
                                   <span class="literal">internalLatencyMin</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">loggerID</span>
                                      (Integer)</em></p>
                        <p>The ID used by the process when registering with MessageLoggers.
                                   If this ID does not match a MessageLogger's filter, the process will
                                   not log to that MessageLogger. (For details on MessageLogger, see
                                   <a href="ch03.html#xref_MessageLogger" title="3.2.1.&nbsp;MessageLogger">MessageLogger</a>).
                        </p>
                        <p>The value range of the ID is 0-255.</p>
                        <p>Multiple BigWorld servers can share the same logger process. If
                                   this behaviour is not desired, then you can use a unique loggerID per
                                   server instance <span class="symbol">&#8208;</span> this will cause
                                   MessageLogger to filter out all messages that do not match the
                                   loggerID it has been told to monitor.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">logSpamPatterns</span> (List
                                      of Strings)</em></p>
                        <p>A list of log message prefixes can be specified which will be
                                   suppressed on a per-second basis if the number sent to MessageLogger
                                   exceeds a certain threshold. Note that this is not intended a
                                   mechanism to sweep error messages "under the carpet"; it is designed
                                   to reduce the network load that can be generated by log traffic, which
                                   tests have indicated can be in excess of actual game traffic in some
                                   situations if suppression is disabled.
                        </p>
                        <p>This option can be overridden by a tag with the same name in any
                                   app section. Note that the overriding does not merge the suppression
                                   lists, it simply replaces the global list with the one defined at the
                                   app level.
                        </p>
                        <p>Additionally, the list of suppression patterns can be modified
                                   at runtime using the <code class="code">logger/addSpamSuppressionPattern</code> and
                                   <code class="code">logger/delSpamSuppressionPattern</code> watchers.
                        </p>
                        <p>Please see <code class="filename">bigworld/res/server/defaults.xml</code>
                                   for an example of a suppression list.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">logSpamThreshold</span>
                                      (Integer)</em></p>
                        <p>The number of a particular log message that can be sent to
                                   MessageLogger in a single second before suppression will take place.
                                   Note that only messages matching one of the
                                   <code class="code">&lt;logSpamPatterns&gt;</code> (see above) will be
                                   suppressed.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">monitoringInterface</span>
                                      (String)</em></p>
                        <p>Network adapter interface to use for non-game communications,
                                   such as logging output, telnet sessions, and watcher requests. For
                                   example: <span class="literal">eth0</span>.
                        </p>
                        <p>See the BaseApp's configuration option externalInterface for
                                   accepted formats.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">numStartupRetries</span>
                                      (Integer)</em></p>
                        <p>Number of times that CellApps and BaseApps will try to locate
                                   other components when starting up.
                        </p>
                        <p>Each attempt is one second apart, so this value roughly
                                   indicates the number of seconds that these two components can be
                                   started before the other 'global' server components have
                                   started.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">outputFilterThreshold</span>
                                      (Integer)</em></p>
                        <p>Value used to filter the messages that are printed and sent to
                                   the logger.
                        </p>
                        <p>All messages are tagged with an integer value. If the message
                                   number is greater than or equal to the filter value, then the message
                                   is allowed (the bigger the value, the more messages are filtered
                                   out).
                        </p>
                        <p>For example, a threshold of 2 allows only INFO messages and
                                   higher (TRACE and DEBUG messages are filtered out).
                        </p>
                        <p>The possible values and their message thresholds are described
                                   in the list below:
                        </p>
                        <div class="itemizedlist">
                           <ul type="circle">
                              <li>
                                 <p><em class="emphasis">0 <span class="symbol">&#8208;</span>
                                                   <span class="literal">MESSAGE_PRIORITY_TRACE</span></em></p>
                              </li>
                              <li>
                                 <p><em class="emphasis">1 <span class="symbol">&#8208;</span>
                                                   <span class="literal">MESSAGE_PRIORITY_DEBUG</span></em></p>
                              </li>
                              <li>
                                 <p><em class="emphasis">2 <span class="symbol">&#8208;</span>
                                                   <span class="literal">MESSAGE_PRIORITY_INFO</span></em></p>
                              </li>
                              <li>
                                 <p><em class="emphasis">3 <span class="symbol">&#8208;</span>
                                                   <span class="literal">MESSAGE_PRIORITY_NOTICE</span></em></p>
                              </li>
                              <li>
                                 <p><em class="emphasis">4 <span class="symbol">&#8208;</span>
                                                   <span class="literal">MESSAGE_PRIORITY_WARNING</span></em></p>
                              </li>
                              <li>
                                 <p><em class="emphasis">5 <span class="symbol">&#8208;</span>
                                                   <span class="literal">MESSAGE_PRIORITY_ERROR</span></em></p>
                              </li>
                              <li>
                                 <p><em class="emphasis">6 <span class="symbol">&#8208;</span>
                                                   <span class="literal">MESSAGE_PRIORITY_CRITICAL</span></em></p>
                              </li>
                              <li>
                                 <p><em class="emphasis">7 <span class="symbol">&#8208;</span>
                                                   <span class="literal">MESSAGE_PRIORITY_HACK</span></em></p>
                              </li>
                              <li>
                                 <p><em class="emphasis">8 <span class="symbol">&#8208;</span>
                                                   <span class="literal">MESSAGE_PRIORITY_SCRIPT</span></em></p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">personality</span>
                                      (String)</em></p>
                        <p>Name of the personality module for the server.</p>
                        <p>This module should contain things such as methods to be called
                                   back from the server (for example, when the server is ready). The
                                   personality module is usually named after your game.
                        </p>
                        <p>If not specified, the module named <code class="code">BWPersonality</code> is
                                   used.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">production</span>
                                      (Boolean)</em></p>
                        <p>If set to <span class="literal">true</span>, enables the server processes
                                   to run in a production mode which makes a best attempt at emitting
                                   <span class="literal">ERROR</span> messages when encountering configuration
                                   settings that are considered detrimental for a production environment.
                                   In rare cases this may also prevent server processes from starting if
                                   the configuration options are seen to be completely unrealistic for a
                                   production environment.
                        </p>
                        <p>Currently this is a global configuration option and cannot be
                                   set per server application type.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">shutDownServerOnBadState</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether server should be shut down when in an
                                   unrecoverable state.
                        </p>
                        <p>Currently, the following scenarios are handled:</p>
                        <div class="itemizedlist">
                           <ul type="circle">
                              <li>
                                 <p>All CellApps are dead.</p>
                              </li>
                              <li>
                                 <p>Currently, the following scenarios are handled:</p>
                                 <div class="itemizedlist">
                                    <ul type="square">
                                       <li>
                                          <p>All BaseApps are dead.</p>
                                       </li>
                                       <li>
                                          <p>Old BaseApp fault tolerance style is being used, and
                                                             there are no backup BaseApps.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Two BaseApps die in quick succession, and thus base
                                                             entities originally residing on the first BaseApp are not
                                                             restored from the second one to a third one, and are therefore
                                                             lost forever.
                                          </p>
                                       </li>
                                    </ul>
                                 </div>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">shutDownServerOnBaseAppDeath</span>
                                      (Boolean)</em></p>
                        <p>If set to true, the entire server will be shut down if a single
                                   BaseApp dies. Normally, the fault tolerance system would allow the
                                   server to continue running.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">shutDownServerOnCellAppDeath</span>
                                      (Boolean)</em></p>
                        <p>If set to true, the entire server will be shut down if a single
                                   CellApp dies. Normally, the fault tolerance system would allow the
                                   server to continue running.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">shouldUseChecksums</span>
                                      (Boolean)</em></p>
                        <p>If set to true, then all packets sent between server components
                                   will be checksummed to verify their correctness. This is in addition
                                   to the UDP checksum automatically provided by the Linux kernel and
                                   protects against packet corruption by buggy network drivers. If a
                                   corrupted packet is detected by Mercury (meaning that it has somehow
                                   passed the UDP checksum), you will see an error message like:
                        </p>
                        <p><span class="literal">ERROR Nub::processFilteredPacket( 10.40.9.103:32823 ):
                                      Packet (flags 178, size 1459) failed checksum (wanted 3dc56738, got
                                      9fe7000a)</span></p>
                        <p>If after running servers for long enough and not seeing this
                                   error message you feel confident that the UDP checksum is reliable
                                   enough on your hardware, you can disable this option for a small
                                   performance improvement. The checksum is very simple and fast to
                                   calculate so this is likely to have only a small impact on
                                   performance.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">shuttingDownDelay</span>
                                      (Float)</em></p>
                        <p>Number of seconds that the server should wait before a requested
                                   controlled shutdown is actually performed.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">useDefaultSpace</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether to automatically create an initial space
                                   when he server starts.
                        </p>
                        <p>This option is ignored if spaces are loaded from the database
                                   during start-up.
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_Network_Configuration_Options"></a>2.5.&nbsp;Network Configuration Options
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The configuration options specified in this section relate to
                      network communication and the behaviour of various aspects of
                      communication channels.
               </p>
               <p>The options specified in the following list are specifically related
                      to the behaviour of channels when packets start overflowing. This can
                      occur when the send window fills up and buffering of packets is required
                      in order to handle packet resends.
               </p>
               <p>The maximum packet options defines a per channel type threshold to
                      assist in preventing channels from using indefinate amounts of memory
                      while buffering overflow packets.
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p><em class="emphasis"><span class="literal">maxChannelOverflow/isAssert</span>
                                      (Boolean)</em></p>
                        <p>Specifies whether the offending channel should raise a program
                                   assertion, effectively terminating the process, when the maximum
                                   number of overflow packets has been reached.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">maxChannelOverflow/external</span>
                                      (Integer)</em></p>
                        <p>Number of packets to allow to overflow on an
                                   <em class="emphasis">external</em> channel before raising an
                                   <span class="literal">ERROR</span> message, or <span class="literal">ASSERT</span>'ing if
                                   <span class="literal">&lt;isAssert&gt;</span> has been set to
                                   <span class="literal">true</span>. A value of <span class="literal">0</span> disables any
                                   log messages and assertions from occuring.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">maxChannelOverflow/internal</span>
                                      (Integer)</em></p>
                        <p>Number of packets to allow to overflow on an
                                   <em class="emphasis">internal</em> channel before raising an
                                   <span class="literal">ERROR</span> message, or <span class="literal">ASSERT</span>'ing if
                                   <span class="literal">&lt;isAssert&gt;</span> has been set to
                                   <span class="literal">true</span>. A value of <span class="literal">0</span> disables any
                                   log messages and assertions from occuring.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">maxChannelOverflow/indexed</span>
                                      (Integer)</em></p>
                        <p>Number of packets to allow to overflow on an
                                   <em class="emphasis">indexed</em> channel before raising an
                                   <span class="literal">ERROR</span> message, or <span class="literal">ASSERT</span>'ing if
                                   <span class="literal">&lt;isAssert&gt;</span> has been set to
                                   <span class="literal">true</span>. A value of <span class="literal">0</span> disables any
                                   log messages and assertions from occuring.
                        </p>
                        <p>An indexed channel is a channel that is used for communicating
                                   directly to an entity.
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_Load_Balancing_Configuration_Options"></a>2.6.&nbsp;Load Balancing Configuration Options
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The load balancing configuration options are specified in file
                      <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                      under the section <span class="literal">&lt;balance&gt;</span>, and are described
                      below:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p><em class="emphasis"><span class="literal">maxCPUOffload</span>
                                      (Float)</em></p>
                        <p>Estimated amount of CPU processing that can be offloaded from a
                                   cell to another in one tick of load balancing.
                        </p>
                        <p>A larger value should result in faster changes to the server's
                                   load balancing. This value is a fraction of 100% CPU usage, and its
                                   range is from 0.0 through 1.0, but is likely to always be less than
                                   0.1.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">minEntityOffload</span>
                                      (Integer)</em></p>
                        <p>Using the option maxCPUOffload, the load balancing algorithm may
                                   decide that less than one entity needs to be offloaded. Since this can
                                   get rounded down to zero, the load balancing can get restricted when
                                   small adjustments need to be made.
                        </p>
                        <p>This option set a minimum value for this, so if it's set to 1
                                   (the default), then the load balancing will have the capacity to make
                                   small adjustments.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">minMovement</span>
                                      (Float)</em></p>
                        <p>Minimum number of metres that a partition line should move when
                                   load balancing.
                        </p>
                        <p>A non-zero value can be useful to avoid the load balancing
                                   getting stuck.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">slowApproachFactor</span>
                                      (Float)</em></p>
                        <p>Aggressiveness of the load balancing when cells are close to
                                   being balanced.
                        </p>
                        <p>The value range is from 0 through 1.</p>
                        <p>A smaller value will result in a slower approach to being
                                   balanced. Too high a value may result in some instability when the
                                   space is close to being balanced.
                        </p>
                     </li>
                  </ul>
               </div>
               <div class="sect2" lang="en">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d0e1275"></a>2.6.1.&nbsp;Entities Cardinality Configuration Options
                           </h3>
                        </div>
                     </div>
                  </div>
                  <p>The configuration options for load balancing based on the number
                           of entities are specified in file
                           <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                           under section <span class="literal">&lt;balance&gt;/&lt;demo&gt;</span>, and are
                           described below:
                  </p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p><em class="emphasis"><span class="literal">enable</span>
                                           (Boolean)</em></p>
                           <p>Flag indicating whether the number of entities should be used
                                        to calculate load, rather than CPU load.
                           </p>
                           <p>In normal situations, the server uses the CPU load on the
                                        CellApps to load balance. But sometimes it is desirable to use the
                                        number of entities per CellApp instead.
                           </p>
                           <p>This may be useful, for example, when running multiple
                                        CellApps on a single machine for testing.
                           </p>
                           <p>See also option
                                        <span class="literal">demo/numEntitiesPerCell</span>.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">numEntitiesPerCell</span>
                                           (Float)</em></p>
                           <p>If option <span class="literal">demo/enable</span> is
                                        <span class="literal">true</span>, then this option is used for calculating a
                                        CellApp's load.
                           </p>
                           <p>The load is calculated as <span class="literal">numEntities /
                                           numEntitiesPerCell</span>.
                           </p>
                           <p>See also option <span class="literal">demo/enable</span>.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_BaseApp_Configuration_Options"></a>2.7.&nbsp;BaseApp Configuration Options
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The BaseApp configuration options are specified in file
                      <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                      under the section <span class="literal">&lt;baseApp&gt;</span>, and are described
                      below:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p><em class="emphasis"><span class="literal">archivePeriod</span>
                                      (Float)</em></p>
                        <p>Period length in seconds where each entity is written to the
                                   database for the purpose of disaster recovery. Each Entity is
                                   guaranteed to have an archive less than 2 x
                                   <span class="literal">archivePeriod</span> old. Setting it to zero switches off
                                   archiving.
                        </p>
                        <p>A large value increases performance, but reduces the
                                   effectiveness of eventual disaster recovery. The opposite is true for
                                   a small value.
                        </p>
                        <p>If secondary databases are disabled, this configuration option
                                   controls how often the entity is written to the primary database. In
                                   this case, this configuration option has a dramatic impact on the
                                   performance of the primary database when there are a large number of
                                   BaseApps. It is recommended to start with large values (a few
                                   minutes), and perform database testing and tuning before reducing
                                   it.
                        </p>
                        <p>If secondary databases are enabled, this configuration option
                                   controls how often the entity is written to the secondary database. In
                                   this case, this configuration option can be set to a relatively small
                                   value (less than a minute) since it only impacts the BaseApp machine
                                   and the load is independent of number of BaseApps - unless the
                                   secondary database directory is on a shared network drive. For more
                                   details on secondary databases, see <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server Programming
                                      Guide</span>'s chapter <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Secondary
                                      Databases</span>.
                        </p>
                        <p>This option is also available for CellAppMgr.</p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">backupPeriod</span>
                                      (Float)</em></p>
                        <p>Number of seconds between backups of each base entity to its
                                   backup BaseApp. This value is rounded to the nearest game tick.
                        </p>
                        <p>As a first level of fault tolerance, base entities can be copied
                                   to a backup BaseApp (<em class="emphasis">i.e.</em>, backup to RAM), while
                                   cell entities are copied to their base entity. For more details on
                                   BaseApp and CellApp fault tolerance, see the document <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server Programming
                                      Guide</span>'s chapter <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Fault Tolerance</span>.
                        </p>
                        <p>The value for this option is very dependant on the game. A small
                                   value means frequent backups, and consequently less lost data in case
                                   a BaseApp fails. But backups cost bandwidth and CPU on the
                                   BaseApp.
                        </p>
                        <p>In general this period can be much smaller than the one
                                   specified in option archivePeriod.
                        </p>
                        <p>See also option <span class="literal">backupPeriod</span> on <a href="ch02.html#xref_CellApp_Configuration_Options" title="2.10.&nbsp;CellApp Configuration Options">CellApp Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">backupTimeout</span>
                                      (Float)</em></p>
                        <p>Number of seconds for a BaseApp to respond to the watchdog
                                   messages from its backup BaseApp before it is considered dead and the
                                   backup BaseApp takes its place.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">backUpUndefinedProperties</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether undefined properties should be backed
                                   up.
                        </p>
                        <p>Properties of an entity are defined in the entity's definition
                                   file. However, it is possible to define additional properties for this
                                   entity in the base script of this entity. For example, an additional
                                   property can be defined by initialising it in the constructor of this
                                   entity class. These additional properties are referred to as undefined
                                   properties.
                        </p>
                        <p>If this option is set to true, undefined properties will be
                                   backed up and an error will be emitted for each of the properties that
                                   cannot be pickled. If this option is set to false, undefined
                                   properties will not be backed up. Default value is true.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">clientOverflowLimit</span>
                                      (Integer)</em></p>
                        <p>If the send window for the channel to the client grows larger
                                   than this many packets, the client is disconnected.
                        </p>
                        <p>Generally, it is better to rely on
                                   <span class="literal">inactivityTimeout</span> to detect an unresponsive client
                                   and so this option should be set to greater than
                                   <span class="literal">inactivityTimeout * gameUpdateHertz</span>.
                        </p>
                        <p>See also option <span class="literal">inactivityTimeout</span> on <a href="ch02.html#xref_BaseApp_Configuration_Options" title="2.7.&nbsp;BaseApp Configuration Options">BaseApp Configuration Options</a></p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">createBaseElsewhereThreshold</span>
                                      (Float)</em></p>
                        <p>Threshold of local BaseApp load below which calls to
                                   <span class="literal">BigWorld.createBaseAnywhere</span> cause the new base
                                   entity to be created locally.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">externalInterface</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">externalLatencyMax</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">externalLatencyMin</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">externalLossRatio</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">externalPort</span>
                                      (Integer)</em></p>
                        <p>Port that may be used for the BaseApp's external socket <span class="symbol">&#8208;</span> the BaseApp can have more than one
                                   <span class="literal">externalPort</span> definition.
                        </p>
                        <p>This option is useful when BaseApp is running behind a firewall
                                   and NAT port mappings need to be set up.
                        </p>
                        <p>If the BaseApps are run behind a firewall, then each BaseApp
                                   expected to run on a single machine should have an externalPort
                                   definition.
                        </p>
                        <p>If this option is not specified, or all specified externalPorts
                                   are taken. then the BaseApp will bind to any available port on the
                                   external interface.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">inactivityTimeout</span>
                                      (Integer)</em></p>
                        <p>Number of seconds that a proxy will proceed without
                                   communication from the client before it considers the connection to be
                                   dead.
                        </p>
                        <p>See also option <span class="literal">clientOverflowLimit</span> on <a href="ch02.html#xref_BaseApp_Configuration_Options" title="2.7.&nbsp;BaseApp Configuration Options">BaseApp Configuration Options</a></p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalInterface</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                        <p><em class="emphasis">This tag is deprecated, and its use is not
                                      recommended. For details, see the document <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server Overview</span>'s section <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server
                                         Components</span> <span class="symbol">&#8594;</span> <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">BWMachined</span> <span class="symbol">&#8594;</span> <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">BWMachined interface
                                         discovery</span>.</em></p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLatencyMax</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLatencyMin</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLossRatio</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">loadSmoothingBias</span>
                                      (Float)</em></p>
                        <p>Value to smooth the load changes on a component by when
                                   calculating new load.
                        </p>
                        <p>The BigWorld server uses the load on a component to perform its
                                   load balancing. Unfiltered, the load can change too quickly to be
                                   useful. The option loadSmoothingBias is used to smooth out this
                                   value.
                        </p>
                        <p>The filtered value is calculated at each game tick as
                                   follows:
                        </p>
                        <p><span class="literal">newSmoothedLoad = (1 - loadSmoothingBias) *
                                      oldSmoothedLoad + loadSmoothingBias * load</span></p>
                        <p>This option is also available for CellApps and
                                   CellAppMgr.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis">
                                      <span class="literal">minClientInactivityResendDelay</span>
                                      (Float)</em></p>
                        <p>Minimum number of seconds that the BaseApp waits before
                                   resending unacknowledged packets to the client. BigWorld also uses
                                   other metrics like the round-trip-time to the client to adjust the
                                   resend timeout period. However, BigWorld will not set the resend
                                   timeout period to less than the value specified in this configuration
                                   option.
                        </p>
                        <p>The BaseApp will resend packets to the client due various
                                   reasons like lost packets, network jitter or client delays in sending
                                   packet acknowledgements. Increasing the minimum resend delay will
                                   generally reduce the number of packet resends. However, increasing
                                   this value will also increase the impact of a lost packet on the end
                                   user experience. The client will only process packets in order.
                                   Therefore, a lost packet will cause the client to buffer subsequent
                                   packets from the server and wait for the lost packet to arrive. If the
                                   resend timeout is long, the user will notice a temporary halting of
                                   updates from the server.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">noSuchPortTimeout</span>
                                      (Float)</em></p>
                        <p>Number of seconds of grace given to a client connection
                                   encountering a <span class="literal">REASON_NO_SUCH_PORT</span> error before the
                                   connection is terminated.
                        </p>
                        <p>The <span class="literal">REASON_NO_SUCH_PORT</span> error indicates that
                                   the host is no longer reachable, a condition that is sometimes
                                   temporary, caused by intermittent network problems.
                        </p>
                        <p>Note that this setting is only approximate <span class="symbol">&#8208;</span> the timeout is shortened if the server sends
                                   more than one packet per tick to the client.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">oldStyleBaseDestroy</span>
                                      (Boolean)</em></p>
                        <p><em class="emphasis">This tag is deprecated, and its use is not
                                      recommended. This option is planned for removal in BigWorld 2.0.
                                      </em></p>
                        <p>Flag indicating whether the destruction of a base entity should
                                   be carried out like in BigWorld versions earlier than 1.6.
                        </p>
                        <p>In those versions, the base entity could be destroyed before the
                                   cell entity; doing so would also destroy the cell entity. From
                                   BigWorld 1.6 and later versions, the base entity must be destroyed
                                   after the cell entity. Calling the method Base.destroy on an entity
                                   that still has its cell part raises a Python exception.
                        </p>
                        <p>If this option is set to true, calling the method Base.destroy
                                   on an entity with a cell part causes the method Base.destroyCellEntity
                                   to be called. After the cell entity has been destroyed, it the
                                   callback onLoseCell is not implemented on the base entity, then the
                                   base entity is destroyed.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">pythonPort</span>
                                      (Integer)</em></p>
                        <p>Port that the Python telnet session listener should listen
                                   on.
                        </p>
                        <p>If set to zero, then a random port is chosen.</p>
                        <p>If the option is missing, then the port number will be set
                                   according to the formula:
                        </p>
                        <p><span class="literal">40,000 + BaseApp ID</span></p>
                        <p>If the desired port is not available in any case, then a random
                                   one is used.
                        </p>
                        <p>This option is also available for CellApps.</p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">reservedTickFraction</span>
                                      (Float)</em></p>
                        <p>Percentage of tick time that should be remaining on current tick
                                   so the next one is considered to be pending.
                        </p>
                        <p>This value is expressed as fraction. For example, setting it to
                                   0.2 means that the next tick will be considered pending when there is
                                   still 20% of the current tick's time remaining.
                        </p>
                        <p>Increasing this parameter will make the server more conservative
                                   in its CPU usage.
                        </p>
                        <p>This affects how aggressive the method
                                   <span class="literal">BigWorld.fetchFromChunks</span> will be about yielding
                                   processing to the next tick.
                        </p>
                        <p><em class="emphasis">Note</em>: This should rarely be
                                   changed from the default value.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">sendAuthToClient</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether BaseApps must send authentication
                                   messages to clients (clients always send authentication to the
                                   server).
                        </p>
                        <p>Use this feature to avoid hacking of clients, and prevent users
                                   from spoofing server messages to other clients.
                        </p>
                        <p>Without this authentication, someone can send fake messages to
                                   clients, pretending to be the server (they will need the IP address of
                                   the client, and the port that the server is using, which can only be
                                   determined from the target client's data stream).
                        </p>
                        <p>This option's value defaults to false, in order to save
                                   bandwidth.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">sendWindowCallbackThreshold</span>
                                      (Float)</em></p>
                        <p>The fraction of an entity channel's send window that needs to be
                                   used before the <span class="literal">onWindowOverflow</span> callback is called
                                   on the associated Base entity.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">shouldResolveMailBoxes</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether a mailbox shoud be resolved to a Base
                                   entity, when possible. If a mailbox refers to a Base entity on the
                                   local BaseApp, the entity is used instead of the mailbox.
                        </p>
                        <p>Although it is more efficient to have this option set, it is
                                   generally better to have it disabled. Having this enabled can lead to
                                   hard to find errors as behaviour changes depending on whether an
                                   entity happens to be local or not.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">verboseExternalNub</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether to generate verbose log output related
                                   to external network traffic.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">warnOnNoDef</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether to generate a warning when Base entity
                                   properties are set that do not have a description in the entity's def
                                   file.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">watcherValues</span>
                                      (String)</em></p>
                        <p>This is not an actual configuration option, but instead a
                                   sub-section inside the section <span class="literal">&lt;baseApp&gt;</span>,
                                   used to set arbitrary watcher values for the BaseApp at initialisation
                                   time.
                        </p>
                        <p>This might be useful when there is a watcher value with no
                                   corresponding entry on file
                                   <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>.
                        </p>
                        <p>For example, to set value of
                                   <span class="literal">debug/baseapp.cpp</span> to 2:
                        </p><pre class="programlisting">&lt;baseApp&gt;
  &lt;watcherValues&gt;
    &lt;debug&gt;
      &lt;baseapp.cpp&gt; 2 &lt;/baseapp.cpp&gt;
      ...</pre><p>Do not use this feature if there is a parameter that can be set
                                   directly. Like all configuration options, this one is only evaluated
                                   once. It means that if there is an entry for watcherValues in
                                   <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/defaults.xml</span>,
                                   then all tags defined in it will be ignored if
                                   <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/
                                      bw.xml</span> also has an entry for
                                   <span class="literal">watcherValues</span> (even if different tags are specified
                                   in each one). This option is also available for CellApps.
                        </p>
                        <div class="informalfigure">
                           <div class="mediaobject"><img src="images/baseapp_configuration_option_watchervalues.png"><span class="caption">
                                 <p>File hierarchy</p></span></div>
                        </div>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">writePythonLog</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether to write the output of Python scripts to
                                   the local log file
                                   <span class="literal">&lt;game_executable_folder&gt;/python.log</span>.
                        </p>
                        <p>This should generally be set to false, since the data is sent to
                                   the central logger anyway, and the disk I/O generated by logging could
                                   block the process.
                        </p>
                        <p>This option is also available for CellApps.</p>
                     </li>
                  </ul>
               </div>
               <div class="sect2" lang="en">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="xref_BaseApp_Secondary_Database_Configuration_Options"></a>2.7.1.&nbsp;Secondary Database Configuration Options
                           </h3>
                        </div>
                     </div>
                  </div>
                  <p>The BaseApp secondary database configuration options are specified
                           in file <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/
                              bw.xml</span> under section
                           <span class="literal">&lt;baseApp&gt;/&lt;secondaryDB&gt;</span>, and are
                           described below:
                  </p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p><em class="emphasis"><span class="literal">enable</span>
                                           (Boolean)</em></p>
                           <p>Flag indicating whether to use secondary databases.</p>
                           <p>For more details about secondary databases, see <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server Programming Guide
                                           </span>'s section <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Secondary
                                           Databases</span>.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">maxCommitPeriod</span>
                                           (Float)</em></p>
                           <p>Maximum number of seconds between each commit. Higher values
                                        will result in better performance. Lower values will reduce the
                                        amount of data loss in case of a total system crash.
                           </p>
                           <p>Explicit <code class="code">BigWorld.writeToDB</code> calls will always
                                        result in a commit. This option only affects the automatic archiving
                                        of entities.
                           </p>
                           <p>If set to zero or this option is empty, the value defaults to
                                        5.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">directory</span>
                                           (String)</em></p>
                           <p>Directory where the secondary database files are stored.
                                        Secondary databases are SQLite files.
                           </p>
                           <p>The secondary database files are cleaned up when the system
                                        shuts down. However, these files should not be treated as normal
                                        temporary files since they are crucial to the data recovery process
                                        in case of a complete system crash.
                           </p>
                           <p>If the first character of the path is a <span class="literal">/</span>
                                        character, the path is treated as an absolute path. Otherwise, the
                                        path is treated as relative to the first
                                        <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em></span> path that
                                        contains the directory.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect2" lang="en">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d0e1860"></a>2.7.2.&nbsp;Packet Log Configuration Options
                           </h3>
                        </div>
                     </div>
                  </div>
                  <p>The BaseApp packet logging configuration options are specified in
                           file <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/
                              bw.xml</span> under section
                           <span class="literal">&lt;baseApp&gt;/&lt;packetLog&gt;</span>, and are described
                           below:
                  </p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p><em class="emphasis"><span class="literal">addr</span>
                                           (String)</em></p>
                           <p>Client for which the packet's content should be logged.</p>
                           <p>The address is specified as dotted decimal format
                                        (<em class="emphasis">e.g.</em>, 10.40.1.1).
                           </p>
                           <p>If this option is empty, then all packets will be
                                        logged.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">enable</span>
                                           (Boolean)</em></p>
                           <p>Flag indicating whether to write all packets to a local log
                                        file proxy.log.
                           </p>
                           <p>This can be useful for debugging.</p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">flushMode</span>
                                           (Boolean)</em></p>
                           <p>Flag indicating whether the log file should be flushed after
                                        each write.
                           </p>
                           <p>This option is useful to ensure all log writes are captured if
                                        the BaseApp is crashing.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">hexMode</span>
                                           (Boolean)</em></p>
                           <p>Flag indicating whether the logged packets' contents should be
                                        written in hexadecimal.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect2" lang="en">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d0e1917"></a>2.7.3.&nbsp;ID Configuration Options
                           </h3>
                        </div>
                     </div>
                  </div>
                  <p>The BaseApp ID configuration options are specified in file
                           <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                           under section <span class="literal">&lt;baseApp&gt;/&lt;ids&gt;</span>, and are
                           described below:
                  </p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p><em class="emphasis"><span class="literal">criticallyLowSize</span>
                                           (Integer)</em></p>
                           <p>Minimum number of IDs in the BaseApp's available ID pool
                                        before the other limits are automatically adjusted.
                           </p>
                           <p>The adjustment aims to help avoid this from occurring
                                        again.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">desiredSize</span>
                                           (Integer)</em></p>
                           <p>Target number of IDs in the BaseApp's available ID pool when
                                        requesting IDs to the parent broker ID (in case it fell below
                                        <span class="literal">lowSize</span>), or returning IDs to it (in case it rose
                                        above highLevel) <span class="symbol">&#8208;</span> for CellApps and
                                        BaseApps, the parent ID broker is the CellAppMgr, while for
                                        CellAppMgr it is DBMgr.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">highSize</span>
                                           (Integer)</em></p>
                           <p>Maximum number of IDs in the BaseApp's available ID pool
                                        before IDs are returned to the parent ID broker <span class="symbol">&#8208;</span> for CellApps and BaseApps, the parent ID
                                        broker is the CellAppMgr, while for CellAppMgr it is DBMgr.
                           </p>
                           <p>ID recycling is currently disabled, so this value is actually
                                        never used.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">lowSize</span>
                                           (Integer)</em></p>
                           <p>Minimum number of IDs that should be available in the
                                        BaseApp's available ID pool before a request is sent to the parent
                                        ID broker to restore it to the value specified in configuration
                                        option <span class="literal">desiredSize</span> <span class="symbol">&#8208;</span> for CellApps and BaseApps, the parent ID
                                        broker is the CellAppMgr, while for CellAppMgr it is DBMgr.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect2" lang="en">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d0e1982"></a>2.7.4.&nbsp;Client Upstream Limits
                           </h3>
                        </div>
                     </div>
                  </div>
                  <p>The client upstream bandwidth can be limited so as to prevent
                           denial-of-service attacks from malicious clients, or errant script code
                           that cause messages from the client to be sent in high volume. This can
                           lead to Mercury channels within the server to become heavily
                           loaded.
                  </p>
                  <p>To prevent this, limits can be specified on the count and size of
                           incoming messages from clients to BaseApps. Once hard limits are reached
                           on the count/size of incoming messages, messages are buffered and played
                           back over time. Once the hard limits on buffering are reached, clients
                           are disconnected.
                  </p>
                  <p>The configuration parameters are specified in the file
                           <code class="filename"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</code>
                           in the <span class="literal">&lt;baseApp&gt;/&lt;clientUpstreamLimits&gt;</span>
                           section. The available sub-elements are described in the following
                           table.
                  </p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p><em class="emphasis"><span class="literal">warnMessagesPerSecond</span>
                                             (Integer)</em></p>
                           <p>This is a warning limit for the number of received messages
                                          from a client that are dispatched, measured in number of messages
                                          per second. When messages are received above this limit, a warning
                                          is emitted. No further warnings for this client of this type are
                                          emitted until the incoming message frequency drops below this
                                          limit.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">maxMessagesPerSecond</span>
                                             (Integer)</em></p>
                           <p>This is a hard limit for the number of received messages
                                          from a client that are dispatched, measured in number of messages
                                          per second. When messages are received above this limit, those and
                                          subsequent messages are buffered for later playback until the
                                          buffer is empty. The message queue for all clients are checked
                                          every tick to replay any eligible messages.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">warnBytesPerSecond</span>
                                             (Integer)</em></p>
                           <p>This is a warning limit for the throughput (in bytes) of
                                          received messages that are dispatched, measured in bytes per
                                          second. When this limit is exceeded, a warning is emitted. No
                                          further warnings for this client of this type are emitted until
                                          the incomng message data throughput drops below this limit.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">maxBytesPerSecond</span>
                                             (Integer)</em></p>
                           <p>This is a hard limit for the size of data (in bytes) in
                                          received messages that are dispatched per second. When messages
                                          are received above this limit, those and subsequent messages are
                                          buffered for later playback until the buffer is empty. The message
                                          queue for all clients are checked every tick to replay any
                                          eligible messages.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">warnMessagesBuffered</span>
                                             (Integer)</em></p>
                           <p>This is a warning limit for the number of received messages
                                          that may be buffered from the client. When this limit is exceeded,
                                          a warning is emitted. No further warnings for this client of this
                                          type are emitted until the number of queued messages drops below
                                          this threshold as a result of queue playback.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">maxMessagesBuffered</span>
                                             (Integer)</em></p>
                           <p>This is a maximum limit for the number of received messages
                                          that may be buffered from the client. When this limit is exceeded,
                                          the client is disconnected and any messages that are buffered are
                                          discarded and not dispatched.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">warnBytesBuffered</span>
                                             (Integer)</em></p>
                           <p>This is a warning limit for the total number of bytes that
                                          may be buffered for a client. When this limit is exceeded, a
                                          warning is emitted. No further warnings for this client of this
                                          type are emitted until the total size of buffered messages drops
                                          below this threshold as a result of queue playback.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">maxBytesBuffered</span>
                                             (Integer)</em></p>
                           <p>This is a maximum limit for the total number of bytes that
                                          may be buffered for a client. When this limit is exceeded, the
                                          client is disconnected and any messages that are buffered are
                                          discarded and not dispatched.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_BaseAppMgr_Configuration_Options"></a>2.8.&nbsp;BaseAppMgr Configuration Options
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The BaseAppMgr configuration options are specified in file
                      <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                      under section <span class="literal">baseAppMgr</span>, and are described
                      below:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p><em class="emphasis"><span class="literal">baseAppOverloadLevel</span>
                                      (Float)</em></p>
                        <p>Minimum load level that all BaseApps should reach for the system
                                   to be considered in overload, and thus reject new logins.
                        </p>
                        <p>Similar overload levels are specified for for any CellApp (by
                                   option <span class="literal">&lt;cellAppOverloadLevel&gt;</span> <span class="symbol">&#8208;</span> for more details, see <a href="ch02.html#xref_CellAppMgr_Configuration_Options" title="2.11.&nbsp;CellAppMgr Configuration Options">CellAppMgr Configuration Options</a>), and for DBMgr (by
                                   option <span class="literal">&lt;overloadLevel&gt;</span> <span class="symbol">&#8208;</span> for more details, see <a href="ch02.html#xref_DBMgr_Configuration_Options" title="2.12.&nbsp;DBMgr Configuration Options">DBMgr Configuration Options</a>).
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">baseAppTimeout</span>
                                      (Float)</em></p>
                        <p>Number of seconds for a BaseApp to respond before it is
                                   considered dead.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">hardKillDeadBaseApps</span>
                                      (Boolean)</em></p>
                        <p>Determines if a non-responsive BaseApp will be terminated with a
                                   SIGQUIT signal.
                        </p>
                        <p>Non-responsive BaseApps must be terminated in order for its
                                   backup to take over its IP address and ID. BaseApp non-responsiveness
                                   is determined by its backup, so a BaseApp running without a backup
                                   will never be reported as being non-responsive (see also configuration
                                   option baseApp/backupTimeout in <a href="ch02.html#xref_BaseApp_Configuration_Options" title="2.7.&nbsp;BaseApp Configuration Options">BaseApp Configuration Options</a>).
                        </p>
                        <p>When this option is set to false, no signal is sent to the
                                   non-responsive BaseApp.
                        </p>
                        <p>Only use this option for debugging, <em class="emphasis">e.g.</em>,
                                   to attach a debugger to the hung process.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalInterface</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                        <p><em class="emphasis">This tag is deprecated, and its use is not
                                      recommended. For details, see the document <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server Overview</span>'s section <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server
                                         Components</span> <span class="symbol">&#8594;</span> <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">BWMachined</span> <span class="symbol">&#8594;</span> <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">BWMachined interface
                                         discovery</span>.</em></p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLatencyMax</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLatencyMin</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLossRatio</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">overloadLogins</span>
                                      (Integer)</em></p>
                        <p>Maximum amount of logins that will be accepted during the
                                   overload tolerance period (see the
                                   <span class="literal">overloadTolerancePeriod</span> option) before rejecting
                                   any further logins.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">overloadTolerancePeriod</span>
                                      (Float)</em></p>
                        <p>Number of seconds that logins will be accepted during a
                                   situation where the BaseApps are overloaded (see the
                                   <span class="literal">baseAppOverloadLevel</span> option). After this period of
                                   time, any further logins will be rejected.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">timeSyncPeriod</span>
                                      (Float)</em></p>
                        <p>Number of seconds between each synchronisation of game time
                                   between BaseAppMgr and CellAppMgr.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">useNewStyleBackup</span>
                                      (Boolean)</em></p>
                        <p><em class="emphasis">Old-style backup is deprecated and its use is not
                                      recommended. It is planned for removal in BigWorld 2.0.
                                      </em></p>
                        <p>Flag indicating whether Distributed BaseApp Backup method should
                                   be used, instead of the older Non-distributed BaseApp Backup
                                   method.
                        </p>
                        <p>In the Distributed BaseApp Backup method, a BaseApp's entities
                                   are backed up in various other real BaseApps, while in the
                                   Non-distributed BaseApp Backup method, various BaseApps would back up
                                   all their entities on a dedicated Backup BaseApp.
                        </p>
                        <p>For details, see <a href="ch05.html#xref_BaseApp_Fault_Tolerance" title="5.2.&nbsp;BaseApp Fault Tolerance">BaseApp Fault Tolerance</a>, and the document <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server Overview</span>'s section <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server
                                      Components</span> <span class="symbol">&#8594;</span> <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">BaseApp</span> <span class="symbol">&#8594;</span> <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Fault
                                      tolerance</span>.
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_Bots_Configuration_Options"></a>2.9.&nbsp;Bots Configuration Options
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The Bots configuration options are specified in file
                      <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                      under the section <span class="literal">&lt;bots&gt;</span>, and are described
                      below:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p><em class="emphasis"><span class="literal">controllerData</span>
                                      (String)</em></p>
                        <p>Default data that the bot's controller will be created with
                                   (when bots are created, they get a controller associated with them to
                                   control their movement).
                        </p>
                        <p>This may have different meanings for different controller types.
                                   For example, some controller types may interpret this as a filename to
                                   load data from.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">controllerType</span>
                                      (String)</em></p>
                        <p>Type of the controller to be created with bot.</p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">password</span>
                                      (String)</em></p>
                        <p>Password that the bots should use when logging in to the
                                   server.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">port</span>
                                      (Integer)</em></p>
                        <p>Port on the server machine in which bots process will log to
                                   (only used if the option <span class="literal">&lt;serverName&gt;</span> is
                                   specified).
                        </p>
                        <p>Ignored if bots automatically locates the LoginApp.</p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">pythonPort</span>
                                      (Integer)</em></p>
                        <p>Port that the Python telnet session listener should listen
                                   to.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">randomName</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether a random suffix should be added to each
                                   bots name, in order to make them unique.
                        </p>
                        <p>You should only set this option to false if you plan to use only
                                   a single bot. If you plan to use more than one bot, then you will need
                                   them to have different names <span class="symbol">&#8208;</span>
                                   otherwise only the first one will be able to log in.
                        </p>
                        <p>See also option <span class="literal">username</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">scripts</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether the bots process should use Python
                                   scripting for received entities.
                        </p>
                        <p>If set to <span class="literal">false</span>, then received entities are
                                   effectively ignored. Turning this option on has a significant
                                   performance penalty.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">serverName</span>
                                      (String)</em></p>
                        <p>Name of the server machine that the bots process should log in
                                   to (<em class="emphasis">i.e.</em>, the machine running LoginApp).
                        </p>
                        <p>If this option is empty, then the bots process will attempt to
                                   find an appropriate LoginApp on the local network.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">shouldLog</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether messages generated by the bots process
                                   should be sent to the central logger.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis">standinEntity(String)</em></p>
                        <p>Default entity script to be used when a specific Entity type
                                   does not have its corresponding game script.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis">loginMD5Digest(String)</em></p>
                        <p>MD5 digest string (in hex readable form) for server
                                   login.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">userName</span>
                                      (String)</em></p>
                        <p>Username that bots should use when logging in to the
                                   server.
                        </p>
                        <p>When randomName is true, this is the prefix before the randomly
                                   generated part of the name.
                        </p>
                        <p>See also option <span class="literal">randomName</span>.
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_CellApp_Configuration_Options"></a>2.10.&nbsp;CellApp Configuration Options
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The CellApp configuration options are specified in file
                      <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                      under the section <span class="literal">&lt;cellApp&gt;</span>, and are described
                      below:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p><em class="emphasis"><span class="literal">backupPeriod</span>
                                      (Float)</em></p>
                        <p>Number of seconds between backups of each cell entity to its
                                   base entity. This value is rounded to the nearest game tick.
                        </p>
                        <p>As a first level of fault tolerance, cell entities are copied to
                                   their base entities, while base entities can be copied to their backup
                                   BaseApps. For more details on BaseApp and CellApp fault tolerance, see
                                   the document <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server
                                      Programming Guide</span>'s chapter <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Fault Tolerance</span>.
                        </p>
                        <p>The value for this option is very dependant on the game. A small
                                   value means frequent backups, and consequently less lost data in case
                                   a CellApp fails. But backups cost bandwidth and CPU on the
                                   CellApp.
                        </p>
                        <p>See also options <span class="literal">archivePeriod</span> and
                                   <span class="literal">backupPeriod</span> on <a href="ch02.html#xref_BaseApp_Configuration_Options" title="2.7.&nbsp;BaseApp Configuration Options">BaseApp Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">checkOffloadsPeriod</span>
                                      (Float)</em></p>
                        <p>Number of seconds between offload checks.</p>
                        <p>This is a periodic check if entities need to be offloaded, or
                                   new ghosts created.
                        </p>
                        <p>Other options affected by this setting are:
                                   <span class="literal">ghostingMaxPerCheck</span> and
                                   <span class="literal">offloadMaxPerCheck</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">chunkLoadingPeriod</span>
                                      (Float)</em></p>
                        <p>Number of seconds between checks on the progress of loading and
                                   unloading chunks.
                        </p>
                        <p>Chunk loading occurs in a separate thread, but this check in the
                                   main thread queues up more chunks for the loading thread to load (or
                                   unload).
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">defaultAoIRadius</span>
                                      (Float)</em></p>
                        <p>The default AoI radius of new cell entities for proxy entities
                                   when they are created. See also the <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">CellApp Python API
                                      documentation</span>'s entry <em class="emphasis">Main <span class="symbol">&#8594;</span> Cell <span class="symbol">&#8594;</span>
                                      BigWorld <span class="symbol">&#8594;</span> Classes <span class="symbol">&#8594;</span> Entity <span class="symbol">&#8594;</span>
                                      <span class="literal">setAoIRadius</span></em>.
                        </p>
                        <p><em class="emphasis">Note</em>: If this is larger than
                                   <span class="literal">GHOST_DISTANCE</span> (500m), then the AoI radius of
                                   player entities is clamped to <span class="literal">GHOST_DISTANCE</span> across
                                   cell boundaries.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">enforceGhostDecorators</span>
                                      (Boolean)</em></p>
                        <p>Specifies whether to enforce the requirement of adding a
                                   decorator to methods that can safely be called on ghost entities.
                        </p>
                        <p>When enabled, methods that have not been labelled as safe and are
                                   called on an entity that could be a ghost will generate a Python
                                   exception. To be considered safe, the method must either be described
                                   in the <code class="filename">.def</code> file or be decorated with
                                   <code class="code">@bwdecorators.callableOnGhost</code>.
                        </p><pre class="programlisting">import bwdecorators
class Table( BigWorld.Entity ):
	@bwdecorators.callableOnGhost
	def getArea( self ):
		return self.width * self.height</pre></li>
                     <li>
                        <p><em class="emphasis"><span class="literal">entitySpamSize</span>
                                      (Integer)</em></p>
                        <p>Number of bytes that an entity can send to another before a
                                   warning message is displayed.
                        </p>
                        <p>This can be useful to identify entities that are causing a lot
                                   of network traffic.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">fastShutdown</span>
                                      (Boolean)</em></p>
                        <p>Specifies whether to avoid normal chunk unloading when the
                                   system is being shut down. This considerably speeds up the shutdown
                                   process.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">ghostingMaxPerCheck</span>
                                      (Integer)</em></p>
                        <p>Maximum number of ghost creation messages that can be sent per
                                   offload check.
                        </p>
                        <p>The frequency of the offload check is determined by option
                                   <span class="literal">checkOffloadsPeriod</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">ghostUpdateHertz</span>
                                      (Integer)</em></p>
                        <p>Number of seconds between the flushing messages to channels of
                                   neighbouring CellApps.
                        </p>
                        <p>Channels are created between neighbouring CellApps. Messages
                                   (such as ghost data) sent over these channels are not sent
                                   immediately, but are instead flushed periodically. This is done to
                                   avoid the high overhead of sending a packet.
                        </p>
                        <p>If the value of this option is decreased, then there will be
                                   more lag for cross-cell communications.
                        </p>
                        <p>Be careful about increasing this value, because CellApps have a
                                   fixed window size, after which they are flagged as dead. This window
                                   is currently 4096, which mean that if 4,096 packets are not
                                   acknowledged, then the CellApp is flagged as dead. At 50Hz, this takes
                                   around a minute, which is enough to survive occasional heavy bouts of
                                   unexpected swapping.
                        </p>
                        <p><em class="emphasis">Note</em>: Bases always flush
                                   messages immediately.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalInterface</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                        <p><em class="emphasis">This tag is deprecated, and its use is not
                                      recommended. For details, see the document <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server Overview</span>'s section <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server
                                         Components</span>, <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">BWMachined</span>, <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">BWMachined interface
                                         discovery</span>.</em></p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLatencyMax</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLatencyMin</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLossRatio</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">loadDominantTextureMaps</span>
                                      (Boolean)</em></p>
                        <p>Specifies whether to load the terrain's dominant texture maps.
                                   By default, this flag is set to <span class="literal">false</span>.
                        </p>
                        <p>Loading the dominant texture maps enables using features such as
                                   material kinds returned by <span class="literal">BigWorld.collide</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">loadSmoothingBias</span>
                                      (Float)</em></p>
                        <p>Value to smooth the load changes on a component by when
                                   calculating new load.
                        </p>
                        <p>The BigWorld server uses the load on a component to perform its
                                   load balancing. Unfiltered, the load can change too quickly to be
                                   useful. The option <span class="literal">loadSmoothingBias</span> is used to
                                   smooth out this value.
                        </p>
                        <p>The filtered value is calculated at each game tick as
                                   follows:
                        </p>
                        <div class="blockquote">
                           <blockquote class="blockquote">
                              <p>newSmoothedLoad = (1 - loadSmoothingBias) * oldSmoothedLoad +
                                           loadSmoothingBias * load
                              </p>
                           </blockquote>
                        </div>
                        <p>This option is also available for CellAppMgr and
                                   BaseApps.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">maxControllersAbsolute</span>
                                      (Integer)</em></p>
                        <p>Number of controllers that an entity must have before an
                                   exception is raised on attempts to create a new controller on
                                   it.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">maxControllersExpected</span>
                                      (Integer)</em></p>
                        <p>Minimum number of controllers an entity must have before a
                                   warning is generated on attempts to create a new controller on
                                   it.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">maxGhostsToDelete</span>
                                      (Integer)</em></p>
                        <p>Maximum number of ghosts to be deleted from other cells on every
                                   offload check (the frequency of this check is set via
                                   checkOffloadsPeriod).
                        </p>
                        <p>This option is useful for adding antihysteresis and for
                                   smoothing the load caused by ghost deletion.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">minGhostLifespan</span>
                                      (Float)</em></p>
                        <p>Minimum number of seconds for which a real entity will keep a
                                   ghost one.
                        </p>
                        <p>This is useful for adding antihysteresis to the ghost creation
                                   and to the deletion process.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">maxPhysicsNetworkJitter</span>
                                      (Float)</em></p>
                        <p>Maximum number of seconds to allow for when network jitter when
                                   considering movement cheating.
                        </p>
                        <p>The movement of a player may vary slightly due to variations in
                                   network latency. This value sets the level of tolerance for this
                                   jitter.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">navigatorUseGirthGrids</span>
                                      (Boolean)</em></p>
                        <p>Specifies if the waypoint search optimisation scheme should be
                                   used.
                        </p>
                        <p>Girth grid is an optimisation scheme for waypoint search in a
                                   chunk. When this scheme is used, a chunk is divided up into a set of
                                   12x12 grids according to the girth provided (you can have a list of
                                   12x12 grid set for different girth sizes). Every grid square contains
                                   a subset of waypoints that overlap the covered area in a chunk.
                        </p>
                        <p>During a (waypoint) search, only targeted grid squares
                                   (<em class="emphasis">i.e.</em>, subset of waypoints) are searched for the
                                   waypoint, instead of searching through the full set of waypoints. This
                                   scheme will generally improve the waypoint search performance.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">obstacleTreeDepth</span>
                                      (Integer)</em></p>
                        <p>Depth of the obstacle tree to create.</p>
                        <p>Higher numbers increase the speed of collision detection but use
                                   more memory.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">offloadHysteresis</span>
                                      (Float)</em></p>
                        <p>Number of metres that an entity has to be over a cell boundary
                                   before it is actually offloaded.
                        </p>
                        <p>This helps avoid entities being offloaded back and forth between
                                   cells when standing very close to the border.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">offloadMaxPerCheck</span>
                                      (Integer)</em></p>
                        <p>Maximum number of entities that can be offloaded from a cell
                                   during an offload check.
                        </p>
                        <p>The frequency of the offload check is determined by option
                                   checkOffloadsPeriod.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">pythonPort</span>
                                      (Integer)</em></p>
                        <p>Port that the Python telnet session listener should listen
                                   on.
                        </p>
                        <p>If set to zero, then a random port is chosen.</p>
                        <p>If the option is missing, then the port number will be set
                                   according to the formula:
                        </p>
                        <div class="blockquote">
                           <blockquote class="blockquote">
                              <p>50,000 + CellApp ID</p>
                           </blockquote>
                        </div>
                        <p>If the desired port is not available in any case, then a random
                                   one is used.
                        </p>
                        <p>This option is also available for CellApps.</p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">reservedTickFraction</span>
                                      (Float)</em></p>
                        <p>Percentage of tick time that should be remaining on current tick
                                   so the next one is considered to be pending.
                        </p>
                        <p>This value is expressed as fraction. For example, setting it to
                                   0.2 means that the next tick will be considered pending when there is
                                   still 20% of the current tick's time remaining.
                        </p>
                        <p>Increasing this parameter will make the server more conservative
                                   in its CPU usage.
                        </p>
                        <p>This affects how aggressive the method
                                   <span class="literal">BigWorld.fetchFromChunks</span> will be about yielding
                                   processing to the next tick.
                        </p>
                        <p><em class="emphasis">Note</em>: This should rarely be
                                   changed from the default value.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">sendWindowCallbackThreshold</span>
                                      (Float)</em></p>
                        <p>The fraction of an entity channel's send window that needs to be
                                   used before the <span class="literal">onWindowOverflow</span> callback is called
                                   on the associated entity.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">shouldResolveMailBoxes</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether a mailbox shoud be resolved to a Cell
                                   entity, when possible. If a mailbox refers to a Cell entity on the
                                   local CellApp, the entity is used instead of the mailbox.
                        </p>
                        <p>Although it is more efficient to have this option set, it is
                                   generally better to have it disabled. Having this enabled can lead to
                                   hard to find errors as behaviour changes depending on whether an
                                   entity happens to be local or not.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">treatAllOtherEntitiesAsGhosts</span>
                                      (Boolean)</em></p>
                        <p>Puts the CellApp in a debugging mode in which a script running
                                   on it will see only its own entity as real <span class="symbol">&#8208;</span> all other entities will be treated as
                                   ghosts.
                        </p>
                        <p>Method calls, property access, and other functions will operate
                                   as if the other entities really are ghosts. This mean that:
                        </p>
                        <div class="itemizedlist">
                           <ul type="circle">
                              <li>
                                 <p>Method calls will go via the network.</p>
                              </li>
                              <li>
                                 <p>Property access will be read-only, and limited to
                                                <span class="literal">CELL_PUBLIC</span> (or more public) properties (for
                                                more details, see the document <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server Programming
                                                   Guide</span>'s section <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Properties</span> <span class="symbol">&#8594;</span> <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Data
                                                   distribution</span>).
                                 </p>
                              </li>
                              <li>
                                 <p>Many internal functions will not work,
                                                <em class="emphasis">e.g.</em>, adding a new Controller.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p>This is very useful for testing how your scripts work when
                                   dealing with ghost entities, especially if two interacting entities
                                   are nearby and would consequently rarely be ghosts.
                        </p>
                     </li>
                  </ul>
               </div>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p><em class="emphasis"><span class="literal">watcherValues</span>
                                      (String)</em></p>
                        <p>This is not an actual configuration option, but instead a
                                   sub-section inside the section <span class="literal">cellApp</span>, used to set
                                   arbitrary watcher values for the CellApp at initialisation
                                   time.
                        </p>
                        <p>This might be useful when there is a watcher value with no
                                   corresponding entry on
                                   <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>.
                        </p>
                        <p>For example, to set the watcher value
                                   <span class="literal">debug/cellapp.cpp</span> to 2:
                        </p><pre class="programlisting">&lt;cellApp&gt;
  &lt;watcherValues&gt;
    &lt;debug&gt;
      &lt;cellapp.cpp&gt; 2 &lt;/cellapp.cpp&gt;
      ...</pre><p>Do not use this feature if there is a parameter that can be set
                                   directly.
                        </p>
                        <p>Like all configuration options, this one is only evaluated once.
                                   It means that if there is an entry for watcherValues in
                                   <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/defaults.xml</span>,
                                   then all tags defined in it will be ignored if
                                   <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                                   also has an entry for <span class="literal">watcherValues</span> (even if
                                   different tags are specified in each one). This option is also
                                   available for BaseApps.
                        </p>
                        <div class="informalfigure">
                           <div class="mediaobject"><img src="images/cellapp_configuration_option_watchervalues.png"><span class="caption">
                                 <p>File hierarchy</p></span></div>
                        </div>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">writePythonLog</span>
                                      (Boolean)</em></p>
                        <p>Indicates if output of Python scripts should be written to
                                   <span class="literal"><em class="replaceable"><code>&lt;game_executable_folder&gt;</code></em>/python.log</span>.
                        </p>
                        <p>This should generally be set to false, since the data is sent to
                                   the central logger anyway, and the disk I/O generated by logging could
                                   block the process.
                        </p>
                        <p>This option is also available for BaseApps.</p>
                     </li>
                  </ul>
               </div>
               <div class="sect2" lang="en">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d0e2921"></a>2.10.1.&nbsp;Noise Configuration Options
                           </h3>
                        </div>
                     </div>
                  </div>
                  <p>The CellApp noise configuration options are specified in file
                           <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                           under section <span class="literal">&lt;cellApp&gt;/&lt;noise&gt;</span>, and are
                           described below:
                  </p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p><em class="emphasis"><span class="literal">horizontalSpeed</span>
                                           (Float)</em></p>
                           <p>If an entity's horizontal speed exceeds this value (in metres
                                        per second), the entity makes a noise.
                           </p>
                           <p>See <span class="literal">Entity.makeNoise</span> script method for more
                                        information. The event and info are 0 for noises generated this
                                        way.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">standardRange</span>
                                           (Float)</em></p>
                           <p>Distance in metres through which a noise is propagated.</p>
                           <p>This value is multiplied by the level of a noise. For details,
                                        see the <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">CellApp
                                           Python API documentation</span>'s entry <em class="emphasis">Main
                                           <span class="symbol">&#8594;</span> Cell <span class="symbol">&#8594;</span> BigWorld <span class="symbol">&#8594;</span>
                                           Classes <span class="symbol">&#8594;</span> Entity <span class="symbol">&#8594;</span>
                                           <span class="literal">makeNoise</span></em>.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">verticalSpeed</span>
                                           (Float)</em></p>
                           <p>If an entity's falling speed exceeds this value (in metres per
                                        second), the entity makes a noise.
                           </p>
                           <p>This is done via script method
                                        <span class="literal">Entity.makeNoise</span> <span class="symbol">&#8208;</span>
                                        for noises generated this way, the parameter event and info are set
                                        to 0. For details, see the <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">CellApp Python API
                                           documentation</span>'s entry <em class="emphasis">Main <span class="symbol">&#8594;</span> Cell <span class="symbol">&#8594;</span>
                                           BigWorld <span class="symbol">&#8594;</span> Classes <span class="symbol">&#8594;</span> Entity <span class="symbol">&#8594;</span>
                                           <span class="literal">makeNoise</span></em>.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect2" lang="en">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d0e3020"></a>2.10.2.&nbsp;ID Configuration Options
                           </h3>
                        </div>
                     </div>
                  </div>
                  <p>The CellApp ID configuration options are specified in file
                           <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                           under section <span class="literal">&lt;cellApp&gt;/&lt;ids&gt;</span>, and are
                           described below:
                  </p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p><em class="emphasis"><span class="literal">criticallyLowSize</span>
                                           (Integer)</em></p>
                           <p>Minimum number of IDs in the CellApp's available ID pool
                                        before the other limits are automatically adjusted.
                           </p>
                           <p>The adjustment aims to help avoid this from occurring
                                        again.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">desiredSize</span>
                                           (Integer)</em></p>
                           <p>Target number of IDs in the CellApp's available ID pool when
                                        requesting IDs to the parent broker ID (in case it fell below
                                        <span class="literal">lowSize</span>), or returning IDs to it (in case it rose
                                        above <span class="literal">highSize</span>) <span class="symbol">&#8208;</span>
                                        for CellApps and BaseApps, the parent ID broker is the CellAppMgr,
                                        and for CellAppMgr it is DBMgr.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">highSize</span>
                                           (Integer)</em></p>
                           <p>Maximum number of IDs in the CellApp's available ID pool
                                        before IDs are returned to the parent ID broker <span class="symbol">&#8208;</span> for CellApps and BaseApps, the parent ID
                                        broker is the CellAppMgr, and for CellAppMgr it is DBMgr.
                           </p>
                           <p>ID recycling is currently disabled, so this value is actually
                                        never used.
                           </p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">lowSize</span>
                                           (Integer)</em></p>
                           <p>Minimum number of IDs that should be available in the
                                        CellApp's available ID pool before a request is sent to the parent
                                        ID broker to restore it to the value specified in configuration
                                        option desiredSize <span class="symbol">&#8208;</span> for CellApps and
                                        BaseApps, the parent ID broker is the CellAppMgr, and for CellAppMgr
                                        it is DBMgr.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect2" lang="en">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d0e3085"></a>2.10.3.&nbsp;CellApp Profiles Configuration Options
                           </h3>
                        </div>
                     </div>
                  </div>
                  <p>The CellApp profiles configuration options are specified in file
                           <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                           under section <span class="literal">&lt;cellApp&gt;/&lt;profiles&gt;</span>. It
                           contains sub-sections for enabling profiling of specific CellApp
                           functionality. All the profiling options specified below can be modified
                           after server startup on a per CellApp basis by using Watchers. The
                           values are exposed in the CellApp watcher tree under
                           <span class="literal">profilesConfigs/&lt;option&gt;</span>.
                  </p>
                  <p>The list below details the available profiling sub-sections and
                           options:
                  </p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p><em class="emphasis"><span class="literal">initGhost</span></em></p>
                           <p>The <em class="emphasis"><span class="literal">initGhost</span></em> sub-options
                                        define profiling information relating to the initialisation of ghost
                                        entities. Specifically the maximum time taken and network stream
                                        size required to initialise ghost entities from their reals after
                                        which a <span class="literal">WARNING</span> message will be generated. The
                                        initialisation primarily consists of the streaming of ghosted entity
                                        properties.
                           </p>
                           <div class="itemizedlist">
                              <ul type="circle">
                                 <li>
                                    <p><em class="emphasis"><span class="literal">sizeWarningLevel</span>
                                                        (Integer)</em></p>
                                    <p>The size (in bytes) that an
                                                     <code class="methodname">initGhost</code>() method receives before a
                                                     <span class="literal">WARNING</span> message is displayed.
                                    </p>
                                 </li>
                                 <li>
                                    <p><em class="emphasis"><span class="literal">timeWarningLevel</span>
                                                        (Float)</em></p>
                                    <p>The amount of time (in seconds) that an
                                                     <code class="methodname">initGhost</code>() method can take before a
                                                     <span class="literal">WARNING</span> message is displayed. An example of
                                                     the type of message generated is as follows.
                                    </p><pre class="programlisting">WARNING    Profile initGhost/timeWarningLevel exceeded (Creature 23 of size 12338 bytes took 0.00477 seconds)</pre></li>
                              </ul>
                           </div>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">initReal</span></em></p>
                           <p>Similar to the <em class="emphasis"><span class="literal">initGhost</span></em> option, the
                                        <em class="emphasis"><span class="literal">initReal</span></em>
                                        sub-options define profiling information relating to the
                                        initialisation of real entities. Specifically the maximum time taken
                                        and network stream size required to initialise real entities from
                                        their reals after which a <span class="literal">WARNING</span> message will be
                                        generated. The initialisation primarily consists of the streaming of
                                        entity properties.
                           </p>
                           <div class="itemizedlist">
                              <ul type="circle">
                                 <li>
                                    <p><em class="emphasis"><span class="literal">sizeWarningLevel</span>
                                                        (Integer)</em></p>
                                    <p>The size (in bytes) that an
                                                     <code class="methodname">initReal</code>() method receives before a
                                                     <span class="literal">WARNING</span> message is displayed. An example of
                                                     the type of message generated is as follows.
                                    </p><pre class="programlisting">WARNING    Profile initReal/sizeWarningLevel exceeded (Creature 13 of size 68765 bytes took 0.3726 seconds)</pre></li>
                                 <li>
                                    <p><em class="emphasis"><span class="literal">timeWarningLevel</span>
                                                        (Float)</em></p>
                                    <p>The amount of time (in seconds) that an
                                                     <code class="methodname">initReal</code>() method can take before a
                                                     <span class="literal">WARNING</span> message is displayed.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">onLoad</span></em></p>
                           <p>The <code class="methodname">onLoad</code>() operation is invoked
                                        when creating a real entity that had been offloaded from another
                                        CellApp.
                           </p>
                           <div class="itemizedlist">
                              <ul type="circle">
                                 <li>
                                    <p><em class="emphasis"><span class="literal">sizeWarningLevel</span>
                                                        (Integer)</em></p>
                                    <p>The size (in bytes) that an
                                                     <code class="methodname">onLoad</code>() method receives before a
                                                     <span class="literal">WARNING</span> message is displayed. An example of
                                                     the type of message generated is as follows. The size is
                                                     considered as the total size of the real entity and which is
                                                     comprised of non-ghosted (i.e. CELL_PRIVATE) properties and
                                                     other state information such as entities in the AoI, controller
                                                     state etc.
                                    </p>
                                 </li>
                                 <li>
                                    <p><em class="emphasis"><span class="literal">timeWarningLevel</span>
                                                        (Float)</em></p>
                                    <p>The amount of time (in seconds) that an
                                                     <code class="methodname">onLoad</code>() method can take before a
                                                     <span class="literal">WARNING</span> message is displayed.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">backup/sizeWarningLevel</span>
                                           (Integer)</em></p>
                           <p><em class="emphasis"><span class="literal">backup</span></em> is
                                        the operation of performing a fixed point in time copy of the cell
                                        entity to the database (via the base). The size (in bytes) is the
                                        maximum persistent size of the entity (<em class="emphasis">i.e.</em>
                                        only persistent properties) after which a <span class="literal">WARNING</span>
                                        message is displayed.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_CellAppMgr_Configuration_Options"></a>2.11.&nbsp;CellAppMgr Configuration Options
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The CellAppMgr configuration options are specified in file
                      <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                      under the section <span class="literal">&lt;CellAppMgr&gt;</span>, and are described
                      below:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p><em class="emphasis"><span class="literal">archivePeriod</span>
                                      (Float)</em></p>
                        <p>Number of seconds between database writes of space configuration
                                   and space data, for the purpose of disaster recovery.
                        </p>
                        <p>Setting it to zero switches off database writes.</p>
                        <p>A large value increases performance, but reduces the
                                   effectiveness of eventual disaster recovery. The opposite is true for
                                   a small value.
                        </p>
                        <p>Please note that unlike the BaseApp configuration option of the
                                   same name, this configuration option is not affected by the use of
                                   secondary databases. The data is always written to the primary
                                   database. It is recommended to start with large values (a few
                                   minutes), and perform database testing and tuning before reducing
                                   it.
                        </p>
                        <p>This option is also available for BaseApps.</p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">archiveSpaceData</span>
                                      (Boolean)</em></p>
                        <p>Boolean indicating whether or not the space data should be
                                   archived to the database during each <span class="literal">archivePeriod</span>.
                                   Disabling this will help reduce database load if your game is not
                                   reliant on recovering spaces to their previous configuration after a
                                   server crash.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">cellAppLoadLowerBound</span>
                                      (Float)</em></p>
                        <p>Minimum average load that a CellApp must achieve before being
                                   retired.
                        </p>
                        <p>This value is a fraction, and its range is 0.0 through
                                   1.0.
                        </p>
                        <p>Together with <span class="literal">cellAppLoadUpperBound</span>, this
                                   option should be tuned as to conserve CPU, while still allowing for
                                   temporary overloads (which depend on game code characteristics, such
                                   as AI usage).
                        </p>
                        <p>This value must be less than the
                                   <span class="literal">cellAppLoadUpperBound</span>.
                        </p>
                        <p>See also option <span class="literal">cellAppLoadUpperBound</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">cellAppLoadSafetyBound</span>
                                      (Float)</em></p>
                        <p>Limit that the load balancing can increase a cell's load
                                   to.
                        </p>
                        <p>This value has to be greater than cellAppLoadUpperBound.</p>
                        <p>In some situations, such as adding a new cell, some cells may
                                   have their load temporarily increased.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">cellAppLoadSafetyRatio</span>
                                      (Float)</em></p>
                        <p>Cell's average load safety ratio.</p>
                        <p>When the average load of the cells in a space is high, the limit
                                   that the load balancing can safely increase a cell's load to is
                                   calculated by multiplying this value by the average load. The real
                                   boundary is calculated as:
                        </p>
                        <div class="blockquote">
                           <blockquote class="blockquote">
                              <p>max( cellAppLoadSafetyRatio, avgCellAppLoad *
                                           cellAppLoadSafetyRatio )
                              </p>
                           </blockquote>
                        </div>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">cellAppLoadUpperBound</span>
                                      (Float)</em></p>
                        <p>Minimum average load that a CellApp must achieve before a new
                                   cell is considered to be required.
                        </p>
                        <p>This value is a fraction, and its range is 0.0 through
                                   1.0.
                        </p>
                        <p>Too low an upper bound will waste CPU, but too high an upper
                                   bound could potentially allow a CPU spike to kill a CellApp.
                        </p>
                        <p>This value must be greater than the
                                   <span class="literal">cellAppLoadLowerBound</span>.
                        </p>
                        <p>See also option <span class="literal">cellAppLoadLowerBound</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">cellAppLoadWarningLevel</span>
                                      (Float)</em></p>
                        <p>Minimum value that average load of CellApps must achieve (when
                                   there are no other CellApps available to share the load) before
                                   warning messages are sent to the log.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">cellAppOverloadLevel</span>
                                      (Float)</em></p>
                        <p>Minimum load level that any CellApp should reach for the system
                                   to be considered in overload, and thus reject new logins.
                        </p>
                        <p>Similar overload levels are specified for all BaseApps (by
                                   option <span class="literal">&lt;baseAppOverloadLevel&gt;</span> <span class="symbol">&#8208;</span> for details, see <a href="ch02.html#xref_BaseAppMgr_Configuration_Options" title="2.8.&nbsp;BaseAppMgr Configuration Options">BaseAppMgr Configuration Options</a>), and for DBMgr (by
                                   option <span class="literal">&lt;overloadLevel&gt;</span> <span class="symbol">&#8208;</span> for details, see <a href="ch02.html#xref_DBMgr_Configuration_Options" title="2.12.&nbsp;DBMgr Configuration Options">DBMgr Configuration Options</a>).
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">cellAppTimeout</span>
                                      (Float)</em></p>
                        <p>Number of seconds for a CellApp to respond before it is
                                   considered dead.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">hardKillDeadCellApps</span>
                                      (Boolean)</em></p>
                        <p>Determines if a non-responsive CellApp will be terminated with a
                                   SIGQUIT signal.
                        </p>
                        <p>CellApp non-responsiveness is determined by cellAppTimeout
                                   option.
                        </p>
                        <p>It is important to terminate the non-responsive CellApp, in
                                   order to prevent duplicate entities, since some of the entities on the
                                   non-responsive CellApp will be recreated on neighbouring CellApps (for
                                   details, see <a href="ch05.html#xref_CellApp_Fault_Tolerance" title="5.1.&nbsp;CellApp Fault Tolerance">CellApp Fault Tolerance</a>).
                        </p>
                        <p>When this option is set to false, no signal will be sent to the
                                   non-responsive CellApp. This option should only be used for debugging
                                   purposes, <em class="emphasis">e.g.</em>, to attach a debugger to the hung
                                   process.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalInterface</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                        <p><em class="emphasis">This tag is deprecated, and its use is not
                                      recommended. For details, see the document <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server Overview</span>'s section <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server
                                         Components</span>, <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">BWMachined</span>, <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">BWMachined interface
                                         discovery</span>.</em></p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLatencyMax</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLatencyMin</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLossRatio</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">loadBalancePeriod</span>
                                      (Float)</em></p>
                        <p>Number of seconds between adjustments of the cell boundaries to
                                   improve the load balance on CellApps.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">loadSmoothingBias</span>
                                      (Float)</em></p>
                        <p>Value to smooth the load changes on a component by when
                                   calculating new load.
                        </p>
                        <p>The BigWorld server uses the load on a component to perform its
                                   load balancing. Unfiltered, the load can change too quickly to be
                                   useful. The option <span class="literal">loadSmoothingBias</span> is used to
                                   smooth out this value.
                        </p>
                        <p>The filtered value is calculated at each game tick as
                                   follows:
                        </p>
                        <div class="blockquote">
                           <blockquote class="blockquote">
                              <p>newSmoothedLoad = (1 - loadSmoothingBias) * oldSmoothedLoad +
                                           loadSmoothingBias * load
                              </p>
                           </blockquote>
                        </div>
                        <p>The CellAppMgr further smooths the CellApp loads when it is
                                   informed of them.
                        </p>
                        <p>This option is also available for BaseApps and CellApps.</p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">maxLoadingCells</span>
                                      (Integer)</em></p>
                        <p>Maximum number of cells that the meta-load balancing will try to
                                   add to a space to help it initially load its geometry.
                        </p>
                        <p>To disable this feature, set this value to 0.</p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">metaLoadBalancePeriod</span>
                                      (Float)</em></p>
                        <p>Number of seconds between checking whether any cells should be
                                   added to or removed from any spaces to improve the load balance on
                                   CellApps.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">minLoadingArea</span>
                                      (Integer)</em></p>
                        <p>Minimum average area (in square metres) that the cells in a
                                   space must have for it to be added by the meta-load balancing when
                                   attempting to initially load the geometry of a space.
                        </p>
                        <p>If the average area is less than this value, then no more cells
                                   will be added to the meta-load balancing <span class="symbol">&#8208;</span> this is meant to prevent too many cells being
                                   allocated to small spaces.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">overloadTolerancePeriod</span>
                                      (Float)</em></p>
                        <p>Number of seconds that logins will be accepted during a
                                   situation where the CellApps are overloaded (see the
                                   <span class="literal">cellAppOverloadLevel</span> option). After this period of
                                   time, any further logins will be rejected.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">shouldLimitBalanceToChunks</span>
                                      (Boolean)</em></p>
                        <p>Determines if the loaded chunks of cells should be considered
                                   when load balancing.
                        </p>
                        <p>This is enabled by default, so that load balancing will not
                                   cause a cell to cover an area that has not yet been loaded.
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_DBMgr_Configuration_Options"></a>2.12.&nbsp;DBMgr Configuration Options
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The DBMgr configuration options are specified in file
                      <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                      under the section <span class="literal">&lt;dbMgr&gt;</span>, and are described
                      below:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p><em class="emphasis"><span class="literal">allowEmptyDigest</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether DBMgr should allow clients to log in
                                   with an empty MD5 digest.
                        </p>
                        <p>When a client logs in, an MD5 digest of the entity definitions
                                   is sent to the server. This is to ensure that the client is using
                                   resources consistent with the server's.
                        </p>
                        <p>This should be true if you are using egclient or bots to log in,
                                   since those programs do not read the entity definition files (named
                                   <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/scripts/entity_defs/<em class="replaceable"><code>&lt;entity&gt;</code></em>.def</span>).
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">backupDatabases</span>
                                      (List)</em></p>
                        <p><em class="emphasis">Only valid when the MySQL database layer is
                                      used.</em></p>
                        <p>Each element in the list describes a backup database to use in
                                   case the primary database fails. The format of this list is:
                        </p><pre class="programlisting">&lt;label&gt;
  &lt;host&gt;     <em class="replaceable"><code>hostname</code></em>      &lt;/host&gt;
  &lt;username&gt; <em class="replaceable"><code>username</code></em>      &lt;/username&gt;
  &lt;password&gt; <em class="replaceable"><code>password</code></em>      &lt;/password&gt;
  &lt;databaseName&gt;     <em class="replaceable"><code>database_name</code></em> &lt;/databaseName&gt;
&lt;/label&gt;</pre><p>For details on each tag, see <span class="literal">host</span>,
                                   <span class="literal">username</span>, <span class="literal">password</span> and
                                   <span class="literal">databaseName</span> configuration options in this
                                   table.
                        </p>
                        <p>If one of the above tags is not specified, then the backup
                                   database is assumed to be the same as the primary one.
                                   <span class="literal">&lt;label&gt;</span> can be any valid XML tag, and is
                                   currently purely cosmetic.
                        </p>
                        <p>DBMgr immediately switches to a backup database when the
                                   connection to the primary database unexpectedly fails. It assumes that
                                   the backup database is an up-to-date replica of the primary one.
                                   Database replication must be set up manually prior to using DBMgr's
                                   automatic fail-over feature.
                        </p>
                        <p>If multiple backup databases are specified, then DBMgr connects
                                   to them in the order specified in the configuration. If the last
                                   backup database fails, then DBMgr tries to connect to the primary
                                   database again. And so on.
                        </p>
                        <p><em class="emphasis">EXAMPLE:</em></p>
                        <p>The example below configures two backup databases. Since
                                   <span class="literal">username</span>, <span class="literal">password</span>, and
                                   <span class="literal">name</span> of the second backup database are omitted,
                                   they are inherited from the primary database <span class="symbol">&#8208;</span> <em class="emphasis">i.e.</em>,
                                   <span class="literal">username</span> is <span class="literal">biguser</span>,
                                   <span class="literal">password</span> is <span class="literal">bigpwd</span>, and
                                   <span class="literal">databaseName</span> is
                                   <span class="literal">fantasydemo</span>.
                        </p><pre class="programlisting">&lt;dbMgr&gt;
  &lt;host&gt;     dbnode01    &lt;/host&gt;
  &lt;username&gt; biguser     &lt;/username&gt;
  &lt;password&gt; bigpwd      &lt;/password&gt;
  &lt;databaseName&gt;     fantasydemo &lt;/databaseName&gt;
  &lt;backupDatabases&gt;
    &lt;backup&gt;
      &lt;host&gt;     dbnode02    &lt;/host&gt;
      &lt;username&gt; bckpuser    &lt;/username&gt;
      &lt;password&gt; bckpusrpass &lt;/password&gt;
      &lt;databaseName&gt;     fantasy_bkp &lt;/databaseName&gt;
    &lt;/backup&gt;
    &lt;anotherBackup&gt;
      &lt;host&gt; dbnode03 &lt;/host&gt;
    &lt;/anotherBackup&gt;
  &lt;/backupDatabases&gt;
&lt;/dbMgr&gt;</pre></li>
                     <li>
                        <p><em class="emphasis"><span class="literal">clearRecoveryData</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether the previous state of the server should
                                   be cleared from the database.
                        </p>
                        <p>If set to true, then the previous state of the server is cleared
                                   from the database, and is not loaded.
                        </p>
                        <p>If set to false, then the previous state of the server is loaded
                                   from the database.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">createUnknown</span>
                                      (Boolean)</em></p>
                        <p>If <span class="literal">true</span>, a user can log in with an unknown
                                   login name and a new entity of type specified in
                                   <span class="literal">entityType</span> will be created. If
                                   <span class="literal">loadUnknown</span> is also <span class="literal">true</span>, a new
                                   entity is created only if an existing entity is not found.
                        </p>
                        <p>See also options <span class="literal">entityType</span>,
                                   <span class="literal">loadUnknown</span> and
                                   <span class="literal">rememberUnknown</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">databaseName</span></em></p>
                        <p><em class="emphasis">Only valid when the MySQL database layer is
                                      used.</em></p>
                        <p>Name of the underlying database to use.</p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">dumpEntityDescription</span>
                                      (Integer)</em></p>
                        <p>Level of logging information generated when loading entity
                                   definition files (named
                                   <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/scripts/entity_defs/<em class="replaceable"><code>&lt;entity&gt;</code></em>.def</span>).
                        </p>
                        <p>The possible values are described in the list below:</p>
                        <div class="itemizedlist">
                           <ul type="circle">
                              <li>
                                 <p><em class="emphasis">0</em> <span class="symbol">&#8208;</span> No log is generated.
                                 </p>
                              </li>
                              <li>
                                 <p><em class="emphasis">1</em> <span class="symbol">&#8208;</span> Brief details about the entity are
                                                generated.
                                 </p>
                              </li>
                              <li>
                                 <p><em class="emphasis">2</em> <span class="symbol">&#8208;</span> Full listing of entity is
                                                generated.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">entityType</span>
                                      (String)</em></p>
                        <p>Type of entity to create when client logs in with an unknown
                                   name.
                        </p>
                        <p>This option only has effect if option
                                   <span class="literal">createUnknown</span> is set to
                                   <span class="literal">true</span>.
                        </p>
                        <p>See also option <span class="literal">createUnknown</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">host</span>
                                      (String)</em></p>
                        <p><em class="emphasis">Only valid when the MySQL database layer is
                                      used.</em></p>
                        <p>Machine where the database is running.</p>
                        <p>The localhost identified can be used to refer to the current
                                   machine.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalInterface</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                        <p><em class="emphasis">This tag is deprecated, and its use is not
                                      recommended. For details, see the document <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server Overview</span>'s section <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server
                                         Components</span>, <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">BWMachined</span>, <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">BWMachined interface
                                         discovery</span>.</em></p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLatencyMax</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLatencyMin</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLossRatio</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">loadUnknown</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether a user can log in with an unknown name
                                   if there is an entity of type specified in
                                   <span class="literal">entityType</span> with the same name as the
                                   <span class="literal">Username</span>.
                        </p>
                        <p>See also options <span class="literal">entityType</span>,
                                   <span class="literal">createUnknown</span>, and
                                   <span class="literal">rememberUnknown</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">maxSpaceDataSize</span>
                                      (Integer)</em></p>
                        <p><em class="emphasis">Only valid when the MySQL database layer is
                                      used.</em></p>
                        <p>The maximum size (in bytes) of space data that can be written to
                                   the database. The maximum value is 16MB.
                        </p>
                        <p>See also the CellAppMgr option
                                   <span class="literal">archiveSpaceData</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">name</span>
                                      (String)</em></p>
                        <p><em class="emphasis">This tag is deprecated, and its use is not
                                      recommended. Use databaseName instead.</em></p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">numConnections</span>
                                      (Integer)</em></p>
                        <p><em class="emphasis">Only valid when the MySQL database layer is
                                      used.</em></p>
                        <p>Number of connections to make to the underlying database.</p>
                        <p>This must be greater than or equal to 1. The default is
                                   5.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">overloadLevel</span>
                                      (Float)</em></p>
                        <p>Minimum load level that DBMgr should reach for the system to be
                                   considered in overload, and thus reject new logins.
                        </p>
                        <p>Similar overload levels are specified for all BaseApp's (using
                                   <span class="literal">baseAppOverloadLevel</span> <span class="symbol">&#8208;</span> for details, see <a href="ch02.html#xref_BaseAppMgr_Configuration_Options" title="2.8.&nbsp;BaseAppMgr Configuration Options">BaseAppMgr Configuration Options</a>), and for any
                                   CellApp (using <span class="literal">cellAppOverloadLevel</span> <span class="symbol">&#8208;</span> for details, see <a href="ch02.html#xref_CellAppMgr_Configuration_Options" title="2.11.&nbsp;CellAppMgr Configuration Options">CellAppMgr Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">overloadTolerancePeriod</span>
                                      (Float)</em></p>
                        <p>Number of seconds that logins will be accepted during a
                                   situation where the CellApps are overloaded (see the
                                   <span class="literal">overloadLevel</span> option). After this period of time,
                                   any further logins will be rejected.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">Password</span>
                                      (String)</em></p>
                        <p><em class="emphasis">Only valid when the MySQL database layer is
                                      used.</em></p>
                        <p>Password to be used when the DBMgr connects to the underlying
                                   database.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">port</span>
                                      (String)</em></p>
                        <p><em class="emphasis">Only valid when the MySQL database layer is
                                      used.</em></p>
                        <p>Port to be used when the DBMgr connects to the underlying
                                   database. Set it to 0 to use the MySQL default port.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">rememberUnknown</span>
                                      (Boolean)</em></p>
                        <p><em class="emphasis">Only valid when the MySQL database layer is
                                      used.</em></p>
                        <p>Flag indicating whether unknown users allowed to log in (due to
                                   <span class="literal">createUnknown</span> or <span class="literal">loadUnknown</span>
                                   options being <span class="literal">true</span>) will be stored in the database
                                   so that future logins by the same user will no longer be
                                   unknown.
                        </p>
                        <p>See also options <span class="literal">createUnknown</span> and
                                   <span class="literal">loadUnknown</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">syncTablesToDefs</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether changes to entity definition should be
                                   replicated to the MYSQL database.
                        </p>
                        <p>The possible values are described below:</p>
                        <div class="itemizedlist">
                           <ul type="circle">
                              <li>
                                 <p><em class="emphasis"><span class="literal">false</span></em></p>
                                 <p>No changes will be made to MySQL database structure.</p>
                              </li>
                              <li>
                                 <p><em class="emphasis"><span class="literal">true</span></em></p>
                                 <p>Make all necessary changes to the database structure to
                                                match the entity definitions. This includes deleting redundant
                                                columns and tables.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <p>DBMgr will fail to start if the database structure does not
                                   exactly match the entity definitions.
                        </p>
                        <p>This option is intended to help prevent accidental deletion of
                                   data in case there are unintended changes to the entity
                                   definitions.
                        </p>
                        <p>It is recommended to set this option to a safe mode
                                   (<em class="emphasis">i.e.</em>, false), then manually update the MySQL
                                   database structure by running DBMgr with the command line option
                                   <span class="symbol">&#8208;</span>
                                   <span class="literal">--sync-tables-to-defs</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">type</span>
                                      (String)</em></p>
                        <p>Type of database to use. Current options are:
                                   <span class="literal">xml</span> and <span class="literal">mysql</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">username</span>
                                      (String)</em></p>
                        <p><em class="emphasis">Only valid when the MySQL database layer is
                                      used.</em></p>
                        <p>Username used when the DBMgr connects to the underlying
                                   database.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">writePythonLog</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether to write the output of Python scripts to
                                   the local log file
                                   <span class="literal"><em class="replaceable"><code>&lt;game_executable_folder&gt;</code></em>/python.log</span>.
                        </p>
                        <p>This should generally be set to false, since the data is sent to
                                   the central logger anyway, and the disk I/O generated by logging could
                                   block the process.
                        </p>
                        <p>This option is also available for CellApps.</p>
                     </li>
                  </ul>
               </div>
               <div class="sect2" lang="en">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d0e4096"></a>2.12.1.&nbsp;Data Consolidation Options
                           </h3>
                        </div>
                     </div>
                  </div>
                  <p>The options for data consolidation tool are located in the
                           <code class="code">&lt;dbMgr&gt;/&lt;consolidation&gt;</code> section of the server
                           configuration file <code class="code">&lt;res&gt;/server/bw.xml</code></p>
                  <p>For more detail about the data consolidation process, see <a href="ch06.html#xref_Data_Consolidation_Tool" title="6.3.&nbsp;Data Consolidation Tool">Data Consolidation Tool</a>).
                  </p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p><em class="emphasis"><span class="literal">directory</span>
                                           (String)</em></p>
                           <p>Directory where the data consolidation tool puts temporary
                                        secondary database files copied from BaseApp machines. These files
                                        are automatically deleted when the data consolidation process
                                        completes.
                           </p>
                           <p>If the first character of the path is a <span class="literal">/</span>
                                        character, the path is treated as an absolute path. Otherwise, the
                                        path is treated as relative to the first <code class="code">&lt;res&gt;</code>
                                        path that contains the directory.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_LoginApp_Configuration_Options"></a>2.13.&nbsp;LoginApp Configuration Options
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The LoginApp configuration options are specified in file
                      <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                      under the section <span class="literal">&lt;loginApp&gt;</span>, and are described
                      below:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p><em class="emphasis"><span class="literal">allowLogin</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether login attempts should be
                                   accepted.
                        </p>
                        <p>This is useful when the server needs to be started without
                                   accepting logins for a while (<em class="emphasis">e.g.</em>, to have the
                                   server load chunks before allowing logins).
                        </p>
                        <p>Logins can be enabled by setting <span class="literal">allowLogin</span>
                                   watcher on each LoginApp to <span class="literal">true</span> <span class="symbol">&#8208;</span> for a simpler way to achieve this for all
                                   running LoginApps, see <span class="literal">control_cluster.py</span>'s
                                   <span class="literal">set</span> command (for details on
                                   <span class="literal">control_cluster.py</span>, see <a href="ch03.html#xref_control_cluster_py" title="3.3.1.&nbsp;control_cluster.py"><span class="literal">control_cluster.py</span></a>).
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">allowProbe</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether login probes should be accepted.</p>
                        <p>It is recommended to have this flag set to
                                   <span class="literal">false</span> for servers running on the public
                                   Internet.
                        </p>
                        <p>This setting can be changed at runtime by settings the
                                   <span class="literal">allowProbe</span> watcher.
                        </p>
                        <p>See also option <span class="literal">logProbes</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">allowUnencryptedLogins</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether a client sending a plaintext login
                                   request and/or a null session key should be allowed to connect.
                        </p>
                        <p>This flag should only be used for testing purposes. Setting this
                                   flag to true on a production system is not recommended.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">externalAddress</span>
                                      (String)</em></p>
                        <p>Address to be returned to client if he is outside the server
                                   cluster LAN.
                        </p>
                        <p>If the client is outside the server cluster LAN (the option
                                   localNetMask is used to determine that), then LoginApp will return the
                                   IP address set in this option, instead of the address that the BaseApp
                                   thinks it is on.
                        </p>
                        <p>This option is intended for use only during development, when
                                   the machines that the BaseApps are running on do not have real IP
                                   addresses (<em class="emphasis">i.e.</em>, they are behind a NAT'ing
                                   firewall), but you still want clients to log in from the
                                   Internet.
                        </p>
                        <p>See also option <span class="literal">localNetMask</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">externalInterface</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">externalLatencyMax</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">externalLatencyMin</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">externalLossRatio</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalInterface</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                        <p><em class="emphasis">This tag is deprecated, and its use is not
                                      recommended. For details, see the document <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server Overview</span>'s section <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server
                                         Components</span>, <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">BWMachined</span>, <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">BWMachined interface
                                         discovery</span>.</em></p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLatencyMax</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLatencyMin</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLossRatio</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">localNetMask</span>
                                      (String)</em></p>
                        <p>Mask to be used against the client's IP address in order to
                                   determine whether he is inside the server cluster LAN.
                        </p>
                        <p>The net mask is an IP address followed by the number of bits to
                                   match. For example, <span class="literal">10.0.0.0/8</span> would match any IP
                                   starting with 10 (<em class="emphasis">i.e.</em>,
                                   <span class="literal">10.*.*.*</span>). The default is
                                   <span class="literal">0.0.0.0/0</span>, in which case no redirecting will be
                                   done.
                        </p>
                        <p>If it is determined that the client is not on the server cluster
                                   LAN, the LoginApp will return the IP address set in option
                                   externalAddress.
                        </p>
                        <p>See also option <span class="literal">externalAddress</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">loginRateLimit</span>
                                      (Integer)</em></p>
                        <p>Specifies the number of allowed logins when rate-limiting. As
                                   many logins as this are allowed during each rate-limiting period as
                                   specified in option <span class="literal">rateLimitDuration</span>.
                        </p>
                        <p>For example, if option <span class="literal">loginRateLimit</span> is set
                                   to 100, and option <span class="literal">rateLimitDuration</span> is set to 10,
                                   then 100 logins will be allowed every 10 seconds. If the login rate
                                   limit quota is exceeded during this period, no further logins are
                                   allowed until the start of the next 10 second period.
                        </p>
                        <p>See also option <span class="literal">rateLimitDuration</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">logProbes</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether login probe attempts should generate a
                                   log message.
                        </p>
                        <p>This might be useful for servers running on the public Internet,
                                   to verify users who are attempting to probe and/or hack the
                                   server.
                        </p>
                        <p>See also option <span class="literal">allowProbe</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">port</span>
                                      (Integer)</em></p>
                        <p>Port that the LoginApp should listen to for login
                                   requests.
                        </p>
                        <p>If set to zero, then a random port is chosen, which is useful
                                   when running multiple BigWorld server instances in a LAN. The client
                                   would then need to auto-detect the available servers. For more
                                   details, see <a href="ch11.html#xref_Auto_Detections_Of_LoginApps" title="11.3.&nbsp;Auto-Detection of LoginApps">Auto-Detection of LoginApps</a>.
                        </p>
                        <p><em class="emphasis">Note</em>: This option can be
                                   overridden when starting LoginApp with the command-line
                        </p><pre class="programlisting">-loginPort n</pre></li>
                     <li>
                        <p><em class="emphasis"><span class="literal">privateKey</span>
                                      (String)</em></p>
                        <p>This is the filename to read the LoginApp's RSA private key
                                   from. This is the key that is used to decrypt the client's login
                                   credentials.
                        </p>
                        <p>Please see <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Encrypting
                                      Client-Server Traffic </span> for more information about the
                                   encryption support in BigWorld.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">rateLimitDuration</span>
                                      (Integer)</em></p>
                        <p>Specifies the rate-limiting time period in seconds. As many
                                   logins as is specified in option <span class="literal">loginRateLimit</span> are
                                   allowed during every one of these periods.
                        </p>
                        <p>For example, if option <span class="literal">loginRateLimit</span> is set
                                   to 100, and option <span class="literal">rateLimitDuration</span> is set to 10,
                                   then 100 logins will be allowed every 10 seconds. If the login rate
                                   limit quota is exceeded during this period, no further logins are
                                   allowed until the start of the next 10 second period.
                        </p>
                        <p>Setting this value to 0 disables login rate limiting.</p>
                        <p>See also option <span class="literal">loginRateLimit</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">registerExternalInterface</span>
                                      (Boolean)</em></p>
                        <p>If set to true, the LoginApp's external interface will be
                                   registered with bwmachined. This may be useful during development to
                                   allow clients to discover running server. This should be set to false
                                   in a production environment.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">shouldShutDownIfPortUsed</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether the LoginApp should shut down if the
                                   specified port to listen to is not available.
                        </p>
                        <p>If set to true, the LoginApp will shut down if the specified
                                   port to listen to is not available. If set to false, the LoginApp will
                                   find another port to listen to.
                        </p>
                        <p>See also option <span class="literal">port</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">shutDownSystemOnExit</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether the server should be also shut down when
                                   LoginApp is shut down.
                        </p>
                        <p>If set to <span class="literal">true</span>, then a controlled shutdown is
                                   performed on the server.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">verboseExternalNub</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether to generate verbose log output related
                                   to external network traffic.
                        </p>
                        <p>What is verbose about it? what should they expect to see and why
                                   would they want to use it
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="sect1" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h2 class="title" style="clear: both"><a name="xref_Reviver_Configuration_Options"></a>2.14.&nbsp;Reviver Configuration Options
                        </h2>
                     </div>
                  </div>
               </div>
               <p>The Reviver configuration options are specified in file
                      <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                      under the reviver section, and are described below:
               </p>
               <div class="itemizedlist">
                  <ul type="disc">
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLatencyMax</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLatencyMin</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">internalLossRatio</span></em></p>
                        <p>For details, see <a href="ch02.html#xref_General_Configuration_Options" title="2.4.&nbsp;General Configuration Options">General Configuration Options</a>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">pingPeriod</span>
                                      (Float)</em></p>
                        <p>Number of seconds between pings sent to monitored processes for
                                   execution check purposes.
                        </p>
                        <p>Reviver's monitor processes periodically by pinging them to
                                   check that they are still running and functioning normally.
                        </p>
                        <p>See also option <span class="literal">subjectTimeout</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">reattachPeriod</span>
                                      (Float)</em></p>
                        <p>Number of seconds between each time that Reviver checks
                                   processes to determine if it can monitor them.
                        </p>
                        <p>If another Reviver stops monitoring a process, this option
                                   allows this Reviver to start monitoring that process.
                        </p>
                        <p>See also option <span class="literal">subjectTimeout</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">shutDownOnRevive</span>
                                      (Boolean)</em></p>
                        <p>Flag indicating whether the Reviver itself should be shut down
                                   after reviving a monitored process.
                        </p>
                        <p>This is usually set to <span class="literal">true</span>, since once a
                                   Reviver has started a process, that machine should probably be
                                   considered busy.
                        </p>
                        <p>See also option <span class="literal">subjectTimeout</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">subjectTimeout</span>
                                      (Float)</em></p>
                        <p>Number of seconds that a monitored process will wait for a
                                   response from its current Reviver before accepting to be monitored by
                                   another one.
                        </p>
                        <p>If a monitored process does not receive a response from its
                                   current Reviver, then it is assumed that the Reviver has been stopped
                                   after reviving another one of its monitored processes (this behaviour
                                   is set by option <span class="literal">shutDownOnRevive</span>).
                        </p>
                        <p>See also options <span class="literal">pingPeriod</span>,
                                   <span class="literal">reattachPeriod</span> and
                                   <span class="literal">shutDownOnRevive</span>.
                        </p>
                     </li>
                     <li>
                        <p><em class="emphasis"><span class="literal">timeoutInPings</span>
                                      (Integer)</em></p>
                        <p>Number of pings that can be missed by a monitored process before
                                   Reviver assumes it is dead.
                        </p>
                     </li>
                  </ul>
               </div>
               <div class="sect2" lang="en">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d0e4605"></a>2.14.1.&nbsp;Reviver's BaseAppMgr Configuration Options
                           </h3>
                        </div>
                     </div>
                  </div>
                  <p>The BaseAppMgr configuration options are specified in file
                           <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                           under section <span class="literal">&lt;reviver&gt;/&lt;baseAppMgr&gt;</span>.
                           These are the same as general Reviver options, but specific to
                           BaseAppMgr. If the setting is not specified, then the general one is
                           used. For details on these options, see <a href="ch02.html#xref_Reviver_Configuration_Options" title="2.14.&nbsp;Reviver Configuration Options">Reviver Configuration Options</a>.
                  </p>
                  <p>The options are listed below:</p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p><em class="emphasis"><span class="literal">pingPeriod</span>
                                           (Float)</em></p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">subjectTimeout</span>
                                           (Float)</em></p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">timeoutInPings</span>
                                           (Integer)</em></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect2" lang="en">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d0e4641"></a>2.14.2.&nbsp;Reviver's CellAppMgr Configuration Options
                           </h3>
                        </div>
                     </div>
                  </div>
                  <p>The CellAppMgr configuration options are specified in file
                           <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                           under section <span class="literal">&lt;reviver&gt;/&lt;cellAppMgr&gt;</span>.
                           These are the same as general Reviver options, but specific to
                           CellAppMgr. If the setting is not specified, then the general one is
                           used. For details on these options, see <a href="ch02.html#xref_Reviver_Configuration_Options" title="2.14.&nbsp;Reviver Configuration Options">Reviver Configuration Options</a>.
                  </p>
                  <p>The options are listed below:</p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p><em class="emphasis"><span class="literal">pingPeriod</span>
                                           (Float)</em></p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">subjectTimeout</span>
                                           (Float)</em></p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">timeoutInPings</span>
                                           (Integer)</em></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect2" lang="en">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d0e4677"></a>2.14.3.&nbsp;Reviver's DBMgr Configuration Options
                           </h3>
                        </div>
                     </div>
                  </div>
                  <p>The DBMgr configuration options are specified in file
                           <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                           under section <span class="literal">&lt;reviver&gt;/&lt;dbMgr&gt;</span>. These
                           are the same as general Reviver options, but specific to DBMgr. If the
                           setting is not specified, then the general one is used. For details on
                           these options, see <a href="ch02.html#xref_Reviver_Configuration_Options" title="2.14.&nbsp;Reviver Configuration Options">Reviver Configuration Options</a>.
                  </p>
                  <p>The options are listed below:</p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p><em class="emphasis"><span class="literal">pingPeriod</span>
                                           (Float)</em></p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">subjectTimeout</span>
                                           (Float)</em></p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">timeoutInPings</span>
                                           (Integer)</em></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect2" lang="en">
                  <div class="titlepage">
                     <div>
                        <div>
                           <h3 class="title"><a name="d0e4713"></a>2.14.4.&nbsp;Reviver's LoginApp Configuration Options
                           </h3>
                        </div>
                     </div>
                  </div>
                  <p>The LoginApp configuration options are specified in file
                           <span class="literal"><em class="replaceable"><code>&lt;res&gt;</code></em>/server/bw.xml</span>
                           under section <span class="literal">&lt;reviver&gt;/&lt;loginApp&gt;</span>. These
                           are the same as general Reviver options, but specific to LoginApp. If
                           the setting is not specified, then the general one is used. For details
                           on these options, see <a href="ch02.html#xref_Reviver_Configuration_Options" title="2.14.&nbsp;Reviver Configuration Options">Reviver Configuration Options</a>.
                  </p>
                  <p>The options are listed below:</p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p><em class="emphasis"><span class="literal">pingPeriod</span>
                                           (Float)</em></p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">subjectTimeout</span>
                                           (Float)</em></p>
                        </li>
                        <li>
                           <p><em class="emphasis"><span class="literal">timeoutInPings</span>
                                           (Integer)</em></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
         <div class="navfooter">
            <hr class="navheaderline">
            <table width="95%" align="center" summary="Navigation footer">
               <tr>
                  <td width="38%" align="left"><a accesskey="p" href="ch01.html">Prev</a>&nbsp;
                  </td>
                  <td width="20%" align="center">&nbsp;</td>
                  <td width="37%" align="right">&nbsp;<a accesskey="n" href="ch03.html">Next</a></td>
               </tr>
               <tr>
                  <td width="40%" align="left" valign="top">Chapter&nbsp;1.&nbsp;Introduction&nbsp;</td>
                  <td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
                  <td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;3.&nbsp;Admin Tools</td>
               </tr>
               <tr>
                  <td colspan="3">Copyright 1999-2008 BigWorld Pty. Ltd. All rights reserved. Proprietary commercial in confidence.
                     		   
                  </td>
               </tr>
            </table>
         </div>
      </div>
   </body>
</html>