<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>Chapter&nbsp;7.&nbsp;Controlled Startup and Shutdown</title>
      <link rel="stylesheet" href="../css/bigworld.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
      <link rel="start" href="index.html" title="Server Operations Guide">
      <link rel="up" href="index.html" title="Server Operations Guide">
      <link rel="prev" href="ch06.html" title="Chapter&nbsp;6.&nbsp;Backups and Disaster Recovery">
      <link rel="next" href="ch08.html" title="Chapter&nbsp;8.&nbsp;Stress Testing with Bots"><script type="text/javascript" src="../css/bigworld.js"></script></head>
   <body onLoad="loader();">
      <div id="bigworld-header"><img src="bigworld_logo.gif" id="bwLogo" alt="bw logo"></div>
      <div id="content">
         <div class="navheader">
            <table width="95%" align="center" summary="Navigation header">
               <tr>
                  <th colspan="3" align="center">Chapter&nbsp;7.&nbsp;Controlled Startup and Shutdown</th>
               </tr>
               <tr>
                  <td width="20%" align="left"><a accesskey="p" href="ch06.html">Prev</a>&nbsp;
                  </td>
                  <th width="55%" align="center">&nbsp;</th>
                  <td width="20%" align="right">&nbsp;<a accesskey="n" href="ch08.html">Next</a></td>
               </tr>
            </table>
            <hr class="navheaderline">
         </div>
         <div class="chapter" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h2 class="title"><a name="xref_Controlled_Startup_And_Shutdown"></a>Chapter&nbsp;7.&nbsp;Controlled Startup and Shutdown
                     </h2>
                  </div>
               </div>
            </div>
            <p>There are times when the server might need to be shut down, and
                 restarted later in a similar state.
            </p>
            <p>To tell the server to shut down in a controlled way, a message
                 must be sent to all LoginApps. This may be in the form of a Watcher message
                 or a USR1 signal. The easiest way to do this is to use the script
                 <span class="literal">control_cluster.py</span> with the option stop or via WebConsole.
                 For more details, see <a href="ch03.html#xref_control_cluster_py" title="3.3.1.&nbsp;control_cluster.py"><span class="literal">control_cluster.py</span></a>.
            </p>
            <p>Controlled startup and shutdown only work when the underlying database
                 is MySQL &#8212; it does not work when the XML version is used.
            </p>
            <p>If the <span class="literal">bw.xml</span>'s
                 <span class="literal">dbMgr</span>/<span class="literal">clearRecoveryData</span> configuration
                 option is set to <span class="literal">false</span>, then the server is automatically
                 started using information written during the controlled shutdown. If the
                 server had failed unexpectedly, then it is started using the disaster
                 recovery information. Setting that configuration option to
                 <span class="literal">true</span> will cause the server to be started in its initial
                 state, <em class="emphasis">i.e.</em>, an empty space with no entities. For more
                 details, see <a href="ch02.html#xref_DBMgr_Configuration_Options" title="2.12.&nbsp;DBMgr Configuration Options">DBMgr Configuration Options</a>.
            </p>
            <p>The main information that is restored from the database is:</p>
            <div class="itemizedlist">
               <ul type="disc">
                  <li>
                     <p>Spaces and their data</p>
                  </li>
                  <li>
                     <p>Game time</p>
                  </li>
                  <li>
                     <p>Which entities should be in each space.</p>
                  </li>
               </ul>
            </div>
            <p>When using MySQL as the underlying database, this information is
                 stored in the following tables:
            </p>
            <div class="itemizedlist">
               <ul type="disc">
                  <li>
                     <p>Spaces and their data &#8212; <span class="literal">bigworldSpaces</span>,
                              <span class="literal">bigworldSpaceData</span></p>
                  </li>
                  <li>
                     <p>Game time &#8212; <span class="literal">bigworldGameTime</span></p>
                  </li>
                  <li>
                     <p>Which entities should be in each space &#8212;
                              <span class="literal">bigworldLogOns</span></p>
                  </li>
               </ul>
            </div>
            <p>For details on these tables, see the document <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server Programming Guide</span>'s
                 section <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">MySQL Database Schema</span> <span class="symbol">&#8594;</span>
                 <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Non-entity tables</span></p>
            <p>For details on related scripting, see the document <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Server Programming Guide</span>'s
                 chapter <span xmlns:xlink="http://www.w3.org/1999/xlink" class="olink">Controlled Startup and
                    Shutdown</span>.
            </p>
         </div>
         <div class="navfooter">
            <hr class="navheaderline">
            <table width="95%" align="center" summary="Navigation footer">
               <tr>
                  <td width="38%" align="left"><a accesskey="p" href="ch06.html">Prev</a>&nbsp;
                  </td>
                  <td width="20%" align="center">&nbsp;</td>
                  <td width="37%" align="right">&nbsp;<a accesskey="n" href="ch08.html">Next</a></td>
               </tr>
               <tr>
                  <td width="40%" align="left" valign="top">Chapter&nbsp;6.&nbsp;Backups and Disaster Recovery&nbsp;</td>
                  <td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
                  <td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;8.&nbsp;Stress Testing with Bots</td>
               </tr>
               <tr>
                  <td colspan="3">Copyright 1999-2008 BigWorld Pty. Ltd. All rights reserved. Proprietary commercial in confidence.
                     		   
                  </td>
               </tr>
            </table>
         </div>
      </div>
   </body>
</html>